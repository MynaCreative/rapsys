import{X as e,P as t,s as a,z as n,o as r,c as l,b as o,n as s,e as c,t as d,d as i,F as p,G as u,D as y,m,a8 as v,l as h}from"./app-fcd4ac94.js";import{_ as f}from"./_plugin-vue_export-helper-1b428a4d.js";const g=e=>({is:()=>g(e),default:()=>e}),k=e=>({is:(t,a)=>t(e)?g(a()):k(e),default:e=>e()}),b=e=>()=>e;var S=(e=>(e[e.OBJECT=0]="OBJECT",e[e.ARRAY=1]="ARRAY",e[e.VALUE=2]="VALUE",e))(S||{});const x=e({name:"JsonTreeViewItem",props:{data:{required:!0,type:Object},maxDepth:{type:Number,required:!1,default:1},canSelect:{type:Boolean,required:!1,default:!1}},setup(e,n){const r=t({open:e.data.depth<e.maxDepth});const l=a((()=>({"chevron-arrow":!0,opened:r.open}))),o=a((()=>({"value-key":!0,"can-select":e.canSelect}))),s=a((()=>{const t=e.data.length;return 1===e.data.type?1===t?`${t} element`:`${t} elements`:1===t?`${t} property`:`${t} properties`})),c=a((()=>void 0===e.data.value?"undefined":JSON.stringify(e.data.value)));return{state:r,toggleOpen:function(){r.open=!r.open},onClick:function(e){n.emit("selected",{key:e.key,value:e.value,path:e.path})},bubbleSelected:function(e){n.emit("selected",e)},getKey:function(e){const t=Number(e.key);return isNaN(t)?`"${e.key}":`:`${e.key}":`},getValueColor:function(e){return(e=>({is:(t,a)=>t(e)?g(a()):k(e)}))(typeof e).is((e=>"string"===e),b("var(--jtv-string-color)")).is((e=>"number"===e),b("var(--jtv-number-color)")).is((e=>"bigint"===e),b("var(--jtv-number-color)")).is((e=>"boolean"===e),b("var(--jtv-boolean-color)")).is((e=>"object"===e),b("var(--jtv-null-color)")).is((e=>"undefined"===e),b("var(--jtv-null-color)")).default(b("var(--jtv-valueKey-color)"))},classes:l,valueClasses:o,lengthString:s,dataValue:c,ItemType:S}}}),j={class:"json-view-item"},$={key:0},A=["aria-expanded"],C={class:"properties"},O={key:0},V=["role","tabindex"],T={class:"value-key"};const J=f(e({name:"JsonTreeView",components:{JsonTreeViewItem:f(x,[["render",function(e,t,a,f,g,k){const b=n("JsonTreeViewItem",!0);return r(),l("div",j,[e.data.type===e.ItemType.OBJECT||e.data.type===e.ItemType.ARRAY?(r(),l("div",$,[o("button",{class:"data-key","aria-expanded":e.state.open?"true":"false",onClick:t[0]||(t[0]=i(((...t)=>e.toggleOpen&&e.toggleOpen(...t)),["stop"]))},[o("div",{class:s(e.classes)},null,2),c(" "+d(e.data.key)+": ",1),o("span",C,d(e.lengthString),1)],8,A),e.state.open?(r(),l("div",O,[(r(!0),l(p,null,u(e.data.children,(t=>(r(),y(b,{key:e.getKey(t),data:t,maxDepth:e.maxDepth,canSelect:e.canSelect,onSelected:e.bubbleSelected},null,8,["data","maxDepth","canSelect","onSelected"])))),128))])):m("",!0)])):m("",!0),e.data.type===e.ItemType.VALUE?(r(),l("div",{key:1,class:s(e.valueClasses),role:e.canSelect?"button":void 0,tabindex:e.canSelect?"0":void 0,onClick:t[1]||(t[1]=t=>e.onClick(e.data)),onKeyup:[t[2]||(t[2]=v((t=>e.onClick(e.data)),["enter"])),t[3]||(t[3]=v((t=>e.onClick(e.data)),["space"]))]},[o("span",T,d(e.data.key)+":",1),o("span",{style:h({color:e.getValueColor(e.data.value)})},d(e.dataValue),5)],42,V)):m("",!0)])}]])},props:{data:{type:String,required:!1},rootKey:{type:String,required:!1,default:"/"},maxDepth:{type:Number,required:!1,default:1},colorScheme:{type:String,required:!1,default:"light",validator:e=>-1!==["light","dark"].indexOf(e)}},setup(e,t){function n(e,t,a,r,l){if(t instanceof Object){if(t instanceof Array){const o=t.map(((t,o)=>n(o.toString(),t,a+1,l?`${r}${e}[${o}].`:`${r}`,!1)));return{key:e,type:S.ARRAY,depth:a,path:r,length:o.length,children:o}}const o=Object.entries(t).map((([t,o])=>n(t,o,a+1,l?`${r}${e}.`:`${r}`,!0)));return{key:e,type:S.OBJECT,depth:a,path:r,length:o.length,children:o}}return{key:e,type:S.VALUE,path:l?`${r}${e}`:r.slice(0,-1),depth:a,value:t}}return{itemSelected:function(e){t.emit("selected",e)},parsed:a((()=>{const t=e.data;if(null!=t&&null!=t){const a=JSON.parse(t);if(a instanceof Object)return n(e.rootKey,{...a},0,"",!0)}return{key:e.rootKey,type:S.VALUE,path:"",depth:0,value:e.data}}))}}}),[["render",function(e,t,a,l,o,c){const d=n("JsonTreeViewItem");return r(),y(d,{class:s([{"root-item":!0,dark:"dark"===e.colorScheme}]),data:e.parsed,maxDepth:e.maxDepth,onSelected:e.itemSelected},null,8,["class","data","maxDepth","onSelected"])}],["__scopeId","data-v-6dad5814"]]);export{J};
