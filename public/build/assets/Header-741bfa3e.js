import{k as e,r as a,s as l,c as i,b as r,a as t,u as n,n as s,L as d,t as o,e as c,F as u,G as p,E as v,J as m,f,am as b,o as _,m as g,d as h,y}from"./app-fcd4ac94.js";import{d as k}from"./v-money3-60432613.js";import{k as x,i as V,_ as M,a as T,b as H,c as L,d as w}from"./_baseIteratee-bfa677ca.js";import{s as D}from"./multiselect-202337d9.js";var U=function(e){return function(a,l,i){for(var r=-1,t=Object(a),n=i(a),s=n.length;s--;){var d=n[e?s:++r];if(!1===l(t[d],d,t))break}return a}}(),Y=x;var j=V;var S=function(e,a){return function(l,i){if(null==l)return l;if(!j(l))return e(l,i);for(var r=l.length,t=a?r:-1,n=Object(l);(a?t--:++t<r)&&!1!==i(n[t],t,n););return l}}((function(e,a){return e&&U(e,a,Y)}));var q=T,C=function(e,a){var l=[];return S(e,(function(e,i,r){a(e,i,r)&&l.push(e)})),l},I=M,N=H;const z=e((function(e,a){return(N(e)?q:C)(e,I(a))}));var P=M,O=V,$=x;var A=function(e){return function(a,l,i){var r=Object(a);if(!O(a)){var t=P(l);a=$(a),l=function(e){return t(r[e],e,r)}}var n=e(a,l,i);return n>-1?r[t?a[n]:n]:void 0}};var B=/\s/;var G=function(e){for(var a=e.length;a--&&B.test(e.charAt(a)););return a},E=/^\s+/;var F=function(e){return e?e.slice(0,G(e)+1).replace(E,""):e},J=L,R=w,Z=/^[-+]0x[0-9a-f]+$/i,K=/^0b[01]+$/i,Q=/^0o[0-7]+$/i,W=parseInt;var X=function(e){if("number"==typeof e)return e;if(R(e))return NaN;if(J(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=J(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=F(e);var l=K.test(e);return l||Q.test(e)?W(e.slice(2),l?2:8):Z.test(e)?NaN:+e},ee=1/0;var ae=function(e){return e?(e=X(e))===ee||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var le=function(e,a,l,i){for(var r=e.length,t=l+(i?1:-1);i?t--:++t<r;)if(a(e[t],t,e))return t;return-1},ie=M,re=function(e){var a=ae(e),l=a%1;return a==a?l?a-l:a:0},te=Math.max;const ne=e(A((function(e,a,l){var i=null==e?0:e.length;if(!i)return-1;var r=null==l?0:re(l);return r<0&&(r=te(i+r,0)),le(e,ie(a),r)}))),se={class:"card-body"},de={class:"row g-4 mb-4"},oe={class:"col-md-6 col-lg-2"},ce=r("label",{for:"department",class:"form-label required"},"Department",-1),ue={class:"col-md-6 col-lg-2"},pe=r("label",{for:"sbu",class:"form-label required"},"SBU",-1),ve={class:"col-md-6 col-lg-2"},me=r("label",{for:"invoice_type",class:"form-label required"},"Invoice Type",-1),fe={class:"col-md-6 col-lg-2"},be=r("label",{for:"currency",class:"form-label required"},"Currency",-1),_e={class:"col-md-6 col-lg-4"},ge=r("label",{for:"interco",class:"form-label required"},"Interco",-1),he=r("hr",null,null,-1),ye={class:"row g-4 mb-2"},ke={class:"col-lg-4"},xe=r("label",{for:"invoice_number",class:"form-label required"},"Invoice Number",-1),Ve={class:"col-lg-4"},Me=r("label",{for:"total_amount",class:"form-label"},"Invoice Amount",-1),Te={class:"col-lg-4"},He=r("label",{for:"code",class:"form-label"},"Code",-1),Le=["value"],we={class:"row g-4 mb-2"},De={class:"col-lg-4"},Ue=r("label",{for:"vendor",class:"form-label required"},"Vendor",-1),Ye={class:"col-lg-4"},je=r("label",{for:"invoice_date",class:"form-label required"},"Invoice Date",-1),Se={class:"col-lg-4"},qe=r("label",{for:"posting_date",class:"form-label required"},"Posting Date",-1),Ce={class:"row g-4 mb-2"},Ie={class:"col-lg-4"},Ne=r("label",{for:"vendor_site",class:"form-label required"},"Vendor Site",-1),ze={class:"col-lg-4"},Pe=r("label",{for:"invoice_receipt_date",class:"form-label required"},"Receipt Date",-1),Oe={class:"col-lg-4"},$e=r("label",{for:"term_date",class:"form-label"},"Term Date",-1),Ae={class:"row g-4 mb-2"},Be={class:"col-lg-2"},Ge=r("label",{for:"supplier_tax_invoice",class:"form-label"},"Supplier Tax Invoice",-1),Ee={class:"col-lg-2"},Fe=r("label",{for:"term",class:"form-label required"},"Payment Term",-1),Je={class:"col-lg-4"},Re=r("label",{for:"supplier_tax_invoice_date",class:"form-label"},"Supplier Tax Invoice Date",-1),Ze={class:"col-lg-4"},Ke=r("label",{for:"due_date",class:"form-label"},"Due Date",-1),Qe={class:"row g-2 mb-2"},We={class:"col-lg-12"},Xe=r("label",{for:"note",class:"form-label required"},"Note / Description",-1),ea=r("hr",null,null,-1),aa={class:"row g-2"},la={class:"col-lg-12"},ia={class:"align-items-center d-flex mb-3"},ra={class:"card-title mb-0 flex-grow-1"},ta={class:"flex-shrink-0"},na=r("i",{class:"ri-upload-2-fill me-1 align-bottom"},null,-1),sa={class:"g-2"},da={key:0,class:"vstack gap-2"},oa={class:"d-flex align-items-center"},ca={class:"flex-shrink-0 me-3"},ua={class:"avatar-sm"},pa={key:0,class:"avatar-title bg-light rounded fs-24 shadow shadow",style:{color:"#bf2718"}},va=[r("i",{class:"ri-file-text-line"},null,-1)],ma={key:1,class:"avatar-title bg-light text-primary rounded fs-24 shadow shadow"},fa=[r("i",{class:"ri-file-word-line"},null,-1)],ba={key:2,class:"avatar-title bg-light text-success rounded fs-24 shadow shadow"},_a=[r("i",{class:"ri-file-excel-line"},null,-1)],ga={key:3,class:"avatar-title bg-light text-warning rounded fs-24 shadow shadow"},ha=[r("i",{class:"ri-image-line"},null,-1)],ya={key:4,class:"avatar-title bg-light rounded fs-24 shadow shadow",style:{color:"#3a3ca1"}},ka=[r("i",{class:"ri-file-zip-line"},null,-1)],xa={class:"flex-grow-1 overflow-hidden"},Va={class:"fs-13 mb-1"},Ma={href:"javascript:void(0);",class:"text-body text-truncate d-block"},Ta={class:"flex-shrink-0 ms-2"},Ha={class:"d-flex gap-1"},La=["href"],wa=[r("i",{class:"ri-download-2-line"},null,-1)],Da=["onClick"],Ua=[r("i",{class:"ri-delete-bin-line"},null,-1)],Ya={key:1,class:"vstack gap-2"},ja=[y('<div class="d-flex align-items-center"><div class="flex-shrink-0 me-3"><div class="avatar-sm"><div class="avatar-title bg-light text-muted rounded fs-24 shadow shadow"><i class="ri-cloud-off-line"></i></div></div></div><div class="flex-grow-1 overflow-hidden"><h5 class="fs-13 mb-1"><a href="javascript:void(0);" class="text-body text-truncate d-block">No attachment on this invoice</a></h5><div>Please upload the file relating to this invoice.</div></div></div>',1)],Sa={__name:"Header",props:["formData","references"],emits:["update:formData"],setup(e,{emit:y}){const x=e,V=a("attachment_file"),M=a("vendor_site_id"),T=v().appContext.config.globalProperties.$dayjs,H=l({get:()=>x.formData,set(e){y("update:formData",e)}}),L=()=>{M.value.clear()},w=e=>{let a=ne(x.references.terms,{value:e});H.value.due_date=T(H.value.term_date).add(a.day,"day").format("YYYY-MM-DD"),H.value.term_date=T(H.value.term_date).add(a.day,"day").format("YYYY-MM-DD")},U=e=>{let a=ne(x.references.terms,{value:H.value.term_id});H.value.due_date=T(e).add(a.day,"day").format("YYYY-MM-DD"),H.value.term_date=T(e).add(a.day,"day").format("YYYY-MM-DD")},Y=l((()=>z(x.references.vendor_sites,(e=>e.vendor_id==H.value.vendor_id)))),j=e=>{V.value.click()},S=e=>{e.target.files&&H.value.attachments.push(...e.target.files)},q={precision:0,masked:!1};return(a,l)=>{const v=m,y=f,x=b;return _(),i("div",se,[r("div",de,[r("div",oe,[ce,t(n(D),{id:"department",modelValue:n(H).department,"onUpdate:modelValue":l[0]||(l[0]=e=>n(H).department=e),class:s({"is-invalid":n(H).errors.department_id}),searchable:!0,onSelect:l[1]||(l[1]=e=>n(H).department_id=e.id),onClear:l[2]||(l[2]=()=>n(H).department_id=null),object:!0,label:"name",valueProp:"id","aria-describedby":"input-department-feedback",options:e.references.departments,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-department-feedback",innerHTML:n(H).errors.department_id},null,8,["innerHTML"])]),r("div",ue,[pe,t(n(D),{id:"sbu",modelValue:n(H).sbu_id,"onUpdate:modelValue":l[3]||(l[3]=e=>n(H).sbu_id=e),class:s({"is-invalid":n(H).errors.sbu_id}),searchable:!0,"aria-describedby":"input-sbu-feedback",options:e.references.sbus,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-sbu-feedback",innerHTML:n(H).errors.sbu_id},null,8,["innerHTML"])]),r("div",ve,[me,t(n(D),{id:"invoice_type",modelValue:n(H).invoice_type_id,"onUpdate:modelValue":l[4]||(l[4]=e=>n(H).invoice_type_id=e),class:s({"is-invalid":n(H).errors.invoice_type_id}),searchable:!0,"aria-describedby":"input-invoice_type-feedback",options:e.references.invoice_types,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-invoice_type-feedback",innerHTML:n(H).errors.invoice_type_id},null,8,["innerHTML"])]),r("div",fe,[be,t(n(D),{id:"currency",modelValue:n(H).currency_id,"onUpdate:modelValue":l[5]||(l[5]=e=>n(H).currency_id=e),class:s({"is-invalid":n(H).errors.currency_id}),searchable:!0,"aria-describedby":"input-currency-feedback",options:e.references.currencies,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-currency-feedback",innerHTML:n(H).errors.currency_id},null,8,["innerHTML"])]),r("div",_e,[ge,t(n(D),{id:"interco",modelValue:n(H).interco_id,"onUpdate:modelValue":l[6]||(l[6]=e=>n(H).interco_id=e),class:s({"is-invalid":n(H).errors.interco_id}),searchable:!0,"aria-describedby":"input-interco-feedback",options:e.references.intercos,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-interco-feedback",innerHTML:n(H).errors.interco_id},null,8,["innerHTML"])])]),he,r("div",ye,[r("div",ke,[xe,t(y,{id:"invoice_number",modelValue:n(H).invoice_number,"onUpdate:modelValue":l[7]||(l[7]=e=>n(H).invoice_number=e),class:s({"is-invalid":n(H).errors.invoice_number}),"aria-describedby":"input-invoice_number-feedback",autofocus:""},null,8,["modelValue","class"]),t(v,{id:"input-invoice_number-feedback",innerHTML:n(H).errors.invoice_number},null,8,["innerHTML"])]),r("div",Ve,[Me,t(n(k),d({modelValue:n(H).total_amount,"onUpdate:modelValue":l[8]||(l[8]=e=>n(H).total_amount=e),modelModifiers:{number:!0}},q,{disabled:"",class:"form-control text-end","aria-describedby":"input-total_amount-feedback"}),null,16,["modelValue"]),t(v,{id:"input-total_amount-feedback",innerHTML:n(H).errors.total_amount},null,8,["innerHTML"])]),r("div",Te,[He,r("input",{value:n(H).id?n(H).code:"System Generated Number",class:"form-control text-muted",disabled:""},null,8,Le)])]),r("div",we,[r("div",De,[Ue,t(n(D),{id:"vendor",modelValue:n(H).vendor_id,"onUpdate:modelValue":l[9]||(l[9]=e=>n(H).vendor_id=e),class:s({"is-invalid":n(H).errors.vendor_id}),searchable:!0,"aria-describedby":"input-vendor-feedback",options:e.references.vendors,placeholder:"Select data",onChange:L},null,8,["modelValue","class","options"]),t(v,{id:"input-vendor-feedback",innerHTML:n(H).errors.vendor_id},null,8,["innerHTML"])]),r("div",Ye,[je,t(y,{id:"invoice_date",modelValue:n(H).invoice_date,"onUpdate:modelValue":l[10]||(l[10]=e=>n(H).invoice_date=e),class:s({"is-invalid":n(H).errors.invoice_date}),type:"date","aria-describedby":"input-invoice_date-feedback",onInput:U},null,8,["modelValue","class"]),t(v,{id:"input-invoice_date-feedback",innerHTML:n(H).errors.invoice_date},null,8,["innerHTML"])]),r("div",Se,[qe,t(y,{id:"posting_date",modelValue:n(H).posting_date,"onUpdate:modelValue":l[11]||(l[11]=e=>n(H).posting_date=e),class:s({"is-invalid":n(H).errors.posting_date}),type:"date","aria-describedby":"input-posting_date-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-posting_date-feedback",innerHTML:n(H).errors.posting_date},null,8,["innerHTML"])])]),r("div",Ce,[r("div",Ie,[Ne,t(n(D),{id:"vendor_site",modelValue:n(H).vendor_site_id,"onUpdate:modelValue":l[12]||(l[12]=e=>n(H).vendor_site_id=e),class:s({"is-invalid":n(H).errors.vendor_site_id}),"aria-describedby":"input-vendor_site-feedback",options:n(Y),placeholder:"Select data",ref_key:"vendor_site_id",ref:M},null,8,["modelValue","class","options"]),t(v,{id:"input-vendor_site-feedback",innerHTML:n(H).errors.vendor_site_id},null,8,["innerHTML"])]),r("div",ze,[Pe,t(y,{id:"invoice_receipt_date",modelValue:n(H).invoice_receipt_date,"onUpdate:modelValue":l[13]||(l[13]=e=>n(H).invoice_receipt_date=e),class:s({"is-invalid":n(H).errors.invoice_receipt_date}),type:"date","aria-describedby":"input-invoice_receipt_date-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-invoice_receipt_date-feedback",innerHTML:n(H).errors.invoice_receipt_date},null,8,["innerHTML"])]),r("div",Oe,[$e,t(y,{id:"term_date",modelValue:n(H).term_date,"onUpdate:modelValue":l[14]||(l[14]=e=>n(H).term_date=e),class:s({"is-invalid":n(H).errors.term_date}),type:"date","aria-describedby":"input-term_date-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-term_date-feedback",innerHTML:n(H).errors.term_date},null,8,["innerHTML"])])]),r("div",Ae,[r("div",Be,[Ge,t(y,{id:"supplier_tax_invoice",modelValue:n(H).supplier_tax_invoice,"onUpdate:modelValue":l[15]||(l[15]=e=>n(H).supplier_tax_invoice=e),class:s({"is-invalid":n(H).errors.supplier_tax_invoice}),"aria-describedby":"input-supplier_tax_invoice-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-supplier_tax_invoice-feedback",innerHTML:n(H).errors.supplier_tax_invoice},null,8,["innerHTML"])]),r("div",Ee,[Fe,t(n(D),{id:"term",modelValue:n(H).term_id,"onUpdate:modelValue":l[16]||(l[16]=e=>n(H).term_id=e),class:s({"is-invalid":n(H).errors.term_id}),onChange:w,"aria-describedby":"input-term-feedback",options:e.references.terms,placeholder:"Select data"},null,8,["modelValue","class","options"]),t(v,{id:"input-term-feedback",innerHTML:n(H).errors.term_id},null,8,["innerHTML"])]),r("div",Je,[Re,t(y,{id:"supplier_tax_invoice_date",modelValue:n(H).supplier_tax_invoice_date,"onUpdate:modelValue":l[17]||(l[17]=e=>n(H).supplier_tax_invoice_date=e),class:s({"is-invalid":n(H).errors.supplier_tax_invoice_date}),type:"date","aria-describedby":"input-supplier_tax_invoice_date-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-supplier_tax_invoice_date-feedback",innerHTML:n(H).errors.supplier_tax_invoice_date},null,8,["innerHTML"])]),r("div",Ze,[Ke,t(y,{id:"due_date",modelValue:n(H).due_date,"onUpdate:modelValue":l[18]||(l[18]=e=>n(H).due_date=e),class:s({"is-invalid":n(H).errors.due_date}),type:"date","aria-describedby":"input-due_date-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-due_date-feedback",innerHTML:n(H).errors.due_date},null,8,["innerHTML"])])]),r("div",Qe,[r("div",We,[Xe,t(x,{id:"note",modelValue:n(H).note,"onUpdate:modelValue":l[19]||(l[19]=e=>n(H).note=e),class:s({"is-invalid":n(H).errors.note}),rows:"4","aria-describedby":"input-note-feedback"},null,8,["modelValue","class"]),t(v,{id:"input-note-feedback",innerHTML:n(H).errors.note},null,8,["innerHTML"])])]),ea,r("div",aa,[r("div",la,[r("div",ia,[r("h4",ra,"Attachments ("+o(n(H).attachments.length)+")",1),r("div",ta,[r("button",{type:"button",class:"btn btn-soft-info btn-sm shadow-none",onClick:j},[na,c(" Upload")]),r("input",{type:"file",class:"d-none",ref_key:"attachment_file",ref:V,accept:".doc,.docx,.xls,.xlsx,.pdf,.jpeg,.jpg,.png,.zip,.rar",onChange:S,multiple:""},null,544)])]),r("div",sa,[null!==n(H).attachments&&n(H).attachments.length?(_(),i("div",da,[(_(!0),i(u,null,p(n(H).attachments,((e,a)=>{return _(),i("div",{class:"border rounded border-dashed p-2",key:a},[r("div",oa,[r("div",ca,[r("div",ua,["application/pdf"==e.type?(_(),i("div",pa,va)):g("",!0),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e.type?(_(),i("div",ma,fa)):g("",!0),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.type?(_(),i("div",ba,_a)):g("",!0),["image/jpg","image/jpeg","image/png"].includes(e.type)?(_(),i("div",ga,ha)):g("",!0),["application/zip","application/x-zip-compressed","multipart/x-zip","application/vnd.rar","application/x-rar-compressed",""].includes(e.type)?(_(),i("div",ya,ka)):g("",!0)])]),r("div",xa,[r("h5",Va,[r("a",Ma,o(e.name),1)]),r("div",null,o((t=e.size,(s=Math,d=s.log,c=d(t)/d(1e3)|0,t/s.pow(1e3,c)).toFixed(2)+" "+(c?"kMGTPEZY"[--c]+"B":"Bytes"))),1)]),r("div",Ta,[r("div",Ha,[n(H).id?(_(),i("a",{key:0,class:"btn btn-icon text-muted btn-sm fs-18 shadow-none",href:(l=e,l.url?"/"+l.url+"/"+l.storage:"javascript:void(0)"),target:"_blank"},wa,8,La)):g("",!0),r("button",{type:"button",class:"btn btn-icon text-muted btn-sm fs-18 shadow-none",onClick:h((e=>(e=>{H.value.attachments.length>=1&&H.value.attachments.splice(e,1)})(a)),["stop","prevent"])},Ua,8,Da)])])])]);var l,t,s,d,c})),128))])):(_(),i("div",Ya,[r("div",{class:"border rounded border-dashed p-2 cursor-pointer",onClick:j},ja)]))]),t(v,{id:"input-note-feedback",innerHTML:n(H).errors.attachments},null,8,["innerHTML"])])])])}}};export{Sa as default};
