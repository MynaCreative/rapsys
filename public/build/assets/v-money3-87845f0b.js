import{X as e,aa as t,r as n,N as i,al as r,s as u,af as a,H as o,u as l,o as s,c as d,L as c,E as m}from"./app-891c8d04.js";var f=Object.defineProperty,p=(e,t,n)=>(((e,t,n)=>{t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const g={debug:!1,masked:!1,prefix:"",suffix:"",thousands:",",decimal:".",precision:2,disableNegative:!1,disabled:!1,min:null,max:null,allowBlank:!1,minimumNumberOfCharacters:0,modelModifiers:{number:!1},shouldRound:!0,focusOnRight:!1},v=["+","-"],h=["decimal","thousands","prefix","suffix"];function b(e){return Math.max(0,Math.min(e,1e3))}function y(e,t){return e=e.padStart(t+1,"0"),0===t?e:`${e.slice(0,-t)}.${e.slice(-t)}`}function x(e){return(e=e?e.toString():"").replace(/\D+/g,"")||"0"}function N(e,t){return v.includes(e)?(console.warn(`v-money3 "${t}" property don't accept "${e}" as a value.`),!1):!/\d/g.test(e)||(console.warn(`v-money3 "${t}" property don't accept "${e}" (any number) as a value.`),!1)}function w(e){for(const t of h){e[t]=e[t].replace(/\d+/g,"");for(const n of v)e[t]=e[t].replaceAll(n,"")}return e}function k(e){return e.length-(e.indexOf(".")+1)}function S(e){return e.replace(/^(-?)0+(?!\.)(.+)/,"$1$2")}function B(e){return/^-?[\d]+$/g.test(e)}function $(e){return/^-?[\d]+(\.[\d]+)$/g.test(e)}function O(e,t,n){return t>e.length-1?e:e.substring(0,t)+n+e.substring(t+1)}function R(e,t){const n=t-k(e);if(n>=0)return e;let i=e.slice(0,n);const r=e.slice(n);if("."===i.charAt(i.length-1)&&(i=i.slice(0,-1)),parseInt(r.charAt(0),10)>=5){for(let e=i.length-1;e>=0;e-=1){const t=i.charAt(e);if("."!==t&&"-"!==t){const n=parseInt(t,10)+1;if(n<10)return O(i,e,n);i=O(i,e,"0")}}return`1${i}`}return i}function C(e,t){const n=()=>{e.setSelectionRange(t,t)};e===document.activeElement&&(n(),setTimeout(n,1))}function F(e){return new Event(e,{bubbles:!0,cancelable:!1})}function M({debug:e=!1},...t){e&&console.log(...t)}class T{constructor(e){p(this,"number",0n),p(this,"decimal",0),this.setNumber(e)}getNumber(){return this.number}getDecimalPrecision(){return this.decimal}setNumber(e){this.decimal=0,"bigint"==typeof e?this.number=e:"number"==typeof e?this.setupString(e.toString()):this.setupString(e)}toFixed(e=0,t=!0){let n=this.toString();const i=e-this.getDecimalPrecision();return i>0?(n.includes(".")||(n+="."),n.padEnd(n.length+i,"0")):i<0?t?R(n,e):n.slice(0,i):n}toString(){let e=this.number.toString();if(this.decimal){let t=!1;return"-"===e.charAt(0)&&(e=e.substring(1),t=!0),e=e.padStart(e.length+this.decimal,"0"),e=`${e.slice(0,-this.decimal)}.${e.slice(-this.decimal)}`,e=S(e),(t?"-":"")+e}return e}lessThan(e){const[t,n]=this.adjustComparisonNumbers(e);return t<n}biggerThan(e){const[t,n]=this.adjustComparisonNumbers(e);return t>n}isEqual(e){const[t,n]=this.adjustComparisonNumbers(e);return t===n}setupString(e){if(B(e=S(e)))this.number=BigInt(e);else{if(!$(e))throw new Error(`BigNumber has received and invalid format for the constructor: ${e}`);this.decimal=k(e),this.number=BigInt(e.replace(".",""))}}adjustComparisonNumbers(e){let t;t="BigNumber"!==e.constructor.name?new T(e):e;const n=this.getDecimalPrecision()-t.getDecimalPrecision();let i=this.getNumber(),r=t.getNumber();return n>0?r=t.getNumber()*10n**BigInt(n):n<0&&(i=this.getNumber()*10n**BigInt(-1*n)),[i,r]}}function E(e,t=g,n=""){if(M(t,"utils format() - caller",n),M(t,"utils format() - input1",e),null==e)e="";else if("number"==typeof e)e=t.shouldRound?e.toFixed(b(t.precision)):e.toFixed(b(t.precision)+1).slice(0,-1);else if(t.modelModifiers&&t.modelModifiers.number&&B(e))e=Number(e).toFixed(b(t.precision));else if(!t.disableNegative&&"-"===e)return e;M(t,"utils format() - input2",e);const i=t.disableNegative?"":e.indexOf("-")>=0?"-":"";let r=e.replace(t.prefix,"").replace(t.suffix,"");M(t,"utils format() - filtered",r),!t.precision&&"."!==t.thousands&&$(r)&&(r=R(r,0),M(t,"utils format() - !opt.precision && isValidFloat()",r));const u=x(r);M(t,"utils format() - numbers",u),M(t,"utils format() - numbersToCurrency",i+y(u,t.precision));const a=new T(i+y(u,t.precision));M(t,"utils format() - bigNumber1",a.toString()),t.max&&a.biggerThan(t.max)&&a.setNumber(t.max),t.min&&a.lessThan(t.min)&&a.setNumber(t.min);const o=a.toFixed(b(t.precision),t.shouldRound);if(M(t,"utils format() - bigNumber2",a.toFixed(b(t.precision))),/^0(\.0+)?$/g.test(o)&&t.allowBlank)return"";let[l,s]=o.split(".");const d=void 0!==s?s.length:0;l=l.padStart(t.minimumNumberOfCharacters-d,"0"),l=function(e,t){return e.replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${t}`)}(l,t.thousands);const c=t.prefix+function(e,t,n){return t?e+n+t:e}(l,s,t.decimal)+t.suffix;return M(t,"utils format() - output",c),c}function P(e,t=g,n=""){if(M(t,"utils unformat() - caller",n),M(t,"utils unformat() - input",e),!t.disableNegative&&"-"===e)return M(t,"utils unformat() - return netagive symbol",e),e;const i=t.disableNegative?"":e.indexOf("-")>=0?"-":"",r=e.replace(t.prefix,"").replace(t.suffix,"");M(t,"utils unformat() - filtered",r);const u=x(r);M(t,"utils unformat() - numbers",u);const a=new T(i+y(u,t.precision));M(t,"utils unformat() - bigNumber1",u.toString()),t.max&&a.biggerThan(t.max)&&a.setNumber(t.max),t.min&&a.lessThan(t.min)&&a.setNumber(t.min);let o=a.toFixed(b(t.precision),t.shouldRound);return t.modelModifiers&&t.modelModifiers.number&&(o=parseFloat(o)),M(t,"utils unformat() - output",o),o}const j=(e,t,n)=>{if(M(t,"directive setValue() - caller",n),!function(e){for(const t of h)if(!N(e[t],t))return!1;return!0}(t))return void M(t,"directive setValue() - validateRestrictedOptions() return false. Stopping here...",e.value);let i=e.value.length-(e.selectionEnd||0);e.value=E(e.value,t,n),i=Math.max(i,t.suffix.length),i=e.value.length-i,i=Math.max(i,t.prefix.length),C(e,i),e.dispatchEvent(F("change"))},A=(e,t)=>{const n=e.currentTarget,i="Backspace"===e.code||"Delete"===e.code,r=n.value.length-(n.selectionEnd||0)==0;if(M(t,"directive onkeydown() - el.value",n.value),M(t,"directive onkeydown() - backspacePressed",i),M(t,"directive onkeydown() - isAtEndPosition",r),t.allowBlank&&i&&r&&0===P(n.value,t,"directive onkeydown allowBlank")&&(M(t,'directive onkeydown() - set el.value = ""',n.value),n.value="",n.dispatchEvent(F("change"))),M(t,"directive onkeydown() - e.key",e.key),"+"===e.key){M(t,"directive onkeydown() - unformat el.value",n.value);let e=P(n.value,t,"directive onkeydown +");"string"==typeof e&&(e=parseFloat(e)),e<0&&(n.value=String(-1*e))}},I=(e,t)=>{const n=e.currentTarget;M(t,"directive oninput()",n.value),/^[1-9]$/.test(n.value)&&(n.value=y(n.value,b(t.precision)),M(t,"directive oninput() - is 1-9",n.value)),j(n,t,"directive oninput")},V=(e,t)=>{const n=e.currentTarget;M(t,"directive onFocus()",n.value),t.focusOnRight&&C(n,n.value.length-t.suffix.length)},D=["id","value","disabled"],q=e({...{inheritAttrs:!1,name:"Money3",directives:{money3:{mounted(e,t){if(!t.value)return;const n=w({...g,...t.value});if(M(n,"directive mounted() - opt",n),"INPUT"!==e.tagName.toLocaleUpperCase()){const t=e.getElementsByTagName("input");1!==t.length||(e=t[0])}e.onkeydown=e=>{A(e,n)},e.oninput=e=>{I(e,n)},e.onfocus=e=>{V(e,n)},M(n,"directive mounted() - el.value",e.value),j(e,n,"directive mounted")},updated(e,t){if(!t.value)return;const n=w({...g,...t.value});e.onkeydown=e=>{A(e,n)},e.oninput=e=>{I(e,n)},e.onfocus=e=>{V(e,n)},M(n,"directive updated() - el.value",e.value),M(n,"directive updated() - opt",n),j(e,n,"directive updated")},beforeUnmount(e){e.onkeydown=null,e.oninput=null,e.onfocus=null}}}},props:{debug:{required:!1,type:Boolean,default:!1},id:{required:!1,type:[Number,String],default:()=>{const e=m();return e?e.uid:null}},modelValue:{required:!0,type:[Number,String]},modelModifiers:{required:!1,type:Object,default:()=>({number:!1})},masked:{type:Boolean,default:!1},precision:{type:Number,default:()=>g.precision},decimal:{type:String,default:()=>g.decimal,validator:e=>N(e,"decimal")},thousands:{type:String,default:()=>g.thousands,validator:e=>N(e,"thousands")},prefix:{type:String,default:()=>g.prefix,validator:e=>N(e,"prefix")},suffix:{type:String,default:()=>g.suffix,validator:e=>N(e,"suffix")},disableNegative:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},max:{type:[Number,String],default:()=>g.max},min:{type:[Number,String],default:()=>g.min},allowBlank:{type:Boolean,default:()=>g.allowBlank},minimumNumberOfCharacters:{type:Number,default:()=>g.minimumNumberOfCharacters},shouldRound:{type:Boolean,default:()=>g.shouldRound},focusOnRight:{type:Boolean,default:()=>g.focusOnRight}},emits:["update:model-value"],setup(e,{emit:m}){const f=e,{modelValue:p,modelModifiers:g,masked:v,precision:h,shouldRound:y,focusOnRight:x}=t(f);M(f,"component setup()",f);let N=p.value;(f.disableNegative||"-"!==N)&&g.value&&g.value.number&&(N=y.value?Number(p.value).toFixed(b(h.value)):Number(p.value).toFixed(b(h.value)+1).slice(0,-1));const k=n(E(N,f,"component setup"));M(f,"component setup() - data.formattedValue",k.value),i(p,(function(e){M(f,"component watch() -> value",e);const t=E(e,w({...f}),"component watch");t!==k.value&&(M(f,"component watch() changed -> formatted",t),k.value=t)}));let S=null;function B(e){let t=e.target.value;M(f,"component change() -> evt.target.value",t),v.value&&!g.value.number||(t=P(t,w({...f}),"component change")),t!==S&&(S=t,M(f,"component change() -> update:model-value",t),m("update:model-value",t))}const $=r(),O=u((()=>{const e={...$};return delete e["onUpdate:modelValue"],e}));return(t,n)=>{const i=a("money3");return o((s(),d("input",c({id:`${e.id}`},l(O),{type:"tel",class:"v-money3",value:k.value,disabled:f.disabled,onChange:B}),null,16,D)),[[i,{precision:l(h),decimal:f.decimal,thousands:f.thousands,prefix:f.prefix,suffix:f.suffix,disableNegative:f.disableNegative,min:f.min,max:f.max,allowBlank:f.allowBlank,minimumNumberOfCharacters:f.minimumNumberOfCharacters,debug:f.debug,modelModifiers:l(g),shouldRound:l(y),focusOnRight:l(x)}]])}}});export{q as d};
