import{r as s,T as a,D as e,w as r,o as l,a as o,u as t,Z as i,b as d,t as n,c,e as u,F as p,G as m,n as b,m as f,d as w,K as v,A as g,f as h,J as _}from"./app-fcd4ac94.js";import{a as y}from"./vue-feather-icons.es-a9c25000.js";import{_ as x}from"./Main-fc942ad1.js";import{_ as k}from"./PageHeader-17801290.js";import{_ as L}from"./Timestamp-ebdcea1d.js";import"./logo-light-68509ea3.js";import"./sweetalert2.all-6f2ad051.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Footer-73e2a576.js";const P={class:"row"},j={class:"col-xxl-3"},V={class:"card"},H={class:"card-body p-4"},$={class:"text-center"},M={class:"profile-user position-relative d-inline-block mx-auto mb-4"},T=["src"],C={class:"fs-16 mb-1"},F={class:"text-muted mb-1"},S={class:"text-muted mb-0"},A={class:"card shadow-none"},D={class:"card-body bg-soft-info rounded"},E={class:"d-flex"},I={class:"flex-shrink-0"},U={class:"flex-grow-1 ms-3"},Y={class:"fs-15"},G={class:"text-muted mb-0"},J={class:"col-xxl-9"},K={class:"card"},N=d("div",{class:"card-header"},[d("ul",{class:"nav nav-tabs-custom rounded card-header-tabs border-bottom-0",role:"tablist"},[d("li",{class:"nav-item"},[d("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#loginHistories",role:"tab"},[d("i",{class:"fas fa-home"}),u(" Login History ")])]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#changePassword",role:"tab"},[d("i",{class:"far fa-user"}),u(" Change Password ")])])])],-1),q={class:"card-body p-4"},z={class:"tab-content"},B={class:"tab-pane active",id:"loginHistories",role:"tabpanel"},O=d("div",{class:"mb-3 border-bottom pb-2"},[d("h5",{class:"card-title"},"Last 10 authentications")],-1),Q={class:"flex-shrink-0 avatar-sm"},R=["title"],W={key:0,class:"ri-smartphone-line"},X={key:1,class:"ri-tablet-line"},Z={key:2,class:"ri-macbook-line"},ss={class:"flex-grow-1 ms-3"},as={class:"text-muted mb-0"},es={class:"text-muted"},rs={class:"tab-pane",id:"changePassword",role:"tabpanel"},ls=["onSubmit"],os={class:"row g-2"},ts={class:"col-lg-4"},is=d("label",{for:"current_password",class:"form-label"},"Current Password*",-1),ds={class:"col-lg-4"},ns=d("label",{for:"password",class:"form-label"},"New Password*",-1),cs={class:"col-lg-4"},us=d("label",{for:"password_confirmation",class:"form-label"},"Confirm Password*",-1),ps={class:"col-lg-12"},ms={class:"text-end"},bs=["disabled"],fs={__name:"Index",props:["authentications"],setup(fs){const ws={module:"general",name:"Profile",title:"Profile"},vs=[{text:"Dashboard",to:route("dashboard")},{text:ws.title,active:!0}],gs=s=>{if(s)return s.join(", ")},hs=s(null),_s=s(null),ys=a({current_password:"",password:"",password_confirmation:""}),xs=()=>{ys.put(route("password.update"),{preserveScroll:!0,onSuccess:()=>ys.reset(),onError:()=>{ys.errors.password&&(ys.reset("password","password_confirmation"),hs.value.focus()),ys.errors.current_password&&(ys.reset("current_password"),_s.value.focus())}})};return(s,a)=>{const ks=g,Ls=h,Ps=_;return l(),e(x,null,{header:r((()=>[o(k,{title:t(ws).title,breadcrumbs:vs},null,8,["title"])])),default:r((()=>{return[o(t(i),{title:t(ws).title},null,8,["title"]),d("div",P,[d("div",j,[d("div",V,[d("div",H,[d("div",$,[d("div",M,[d("img",{src:`/img/initials/${s.$page.props.auth.user.name.charAt(0).toLowerCase()}.png`,class:"rounded-circle avatar-xl img-thumbnail user-profile-image shadow",alt:"user-profile-image"},null,8,T)]),d("h5",C,n(s.$page.props.auth.user.name),1),d("p",F,n(s.$page.props.auth.user.email),1),d("p",S,n(s.$page.props.auth.department.name),1)])])]),d("div",A,[d("div",D,[d("div",E,[d("div",I,[o(t(y),{class:"text-info icon-dual-info"})]),d("div",U,[d("h6",Y,"Your role is "+n((e=s.$page.props.auth.user.roles,e.map((s=>s.name)).join(", "))),1),d("p",G,[s.$page.props.auth.roles.includes("Administrator")?(l(),c(p,{key:0},[u("You have ability to access all")],64)):(l(),c(p,{key:1},[u("You have ability to access : "+n(gs(s.$page.props.auth.permissions)),1)],64))])])])])])]),d("div",J,[d("div",K,[N,d("div",q,[d("div",z,[d("div",B,[O,(l(!0),c(p,null,m(fs.authentications,(s=>(l(),c("div",{class:"d-flex align-items-center mb-3",key:s.id},[d("div",Q,[d("div",{class:b(["avatar-title rounded-3 fs-18 shadow bg-light",{"text-primary":s.login_successful,"text-danger":!s.login_successful}]),title:`${s.login_successful?"Login Success":"Login Failed"} : ${s.user_agent.userAgent}`},[s.user_agent.isMobile?(l(),c("i",W)):f("",!0),s.user_agent.isTablet?(l(),c("i",X)):f("",!0),s.user_agent.isDesktop?(l(),c("i",Z)):f("",!0)],10,R)]),d("div",ss,[d("h6",null,n(s.user_agent.platformFamily)+" - "+n(s.user_agent.browserFamily),1),d("p",as,n(s.location.city)+", "+n(s.location.country)+" - "+n(s.ip_address),1)]),d("div",es,[o(L,{data:s.login_at},null,8,["data"]),u(),s.logout_at?(l(),c(p,{key:0},[u("- "),o(L,{data:s.logout_at},null,8,["data"])],64)):f("",!0)])])))),128))]),d("div",rs,[d("form",{onSubmit:w(xs,["prevent"])},[d("div",os,[o(v,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:r((()=>[o(ks,{modelValue:t(ys).recentlySuccessful,variant:"success"},{default:r((()=>[u("Password has been changed")])),_:1},8,["modelValue"])])),_:1}),d("div",ts,[d("div",null,[is,o(Ls,{type:"password",id:"current_password",ref_key:"currentPasswordInput",ref:_s,modelValue:t(ys).current_password,"onUpdate:modelValue":a[0]||(a[0]=s=>t(ys).current_password=s),class:b({"is-invalid":t(ys).errors.current_password}),"aria-describedby":"input-current_password-feedback",placeholder:"Enter current password",autocomplete:"current-password",autofocus:""},null,8,["modelValue","class"]),o(Ps,{id:"input-current_password-feedback",innerHTML:t(ys).errors.current_password},null,8,["innerHTML"])])]),d("div",ds,[d("div",null,[ns,o(Ls,{type:"password",id:"password",ref_key:"passwordInput",ref:hs,modelValue:t(ys).password,"onUpdate:modelValue":a[1]||(a[1]=s=>t(ys).password=s),class:b({"is-invalid":t(ys).errors.password}),"aria-describedby":"input-password-feedback",placeholder:"Enter new password",autocomplete:"new-password"},null,8,["modelValue","class"]),o(Ps,{id:"input-password-feedback",innerHTML:t(ys).errors.password},null,8,["innerHTML"])])]),d("div",cs,[d("div",null,[us,o(Ls,{type:"password",id:"password_confirmation",modelValue:t(ys).password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=s=>t(ys).password_confirmation=s),class:b({"is-invalid":t(ys).errors.password}),"aria-describedby":"input-password_confirmation-feedback",placeholder:"Confirm password",autocomplete:"new-password"},null,8,["modelValue","class"]),o(Ps,{id:"input-password_confirmation-feedback",innerHTML:t(ys).errors.password},null,8,["innerHTML"])])]),d("div",ps,[d("div",ms,[d("button",{type:"submit",class:"btn btn-success",disabled:t(ys).processing}," Change Password ",8,bs)])])])],40,ls)])])])])])])];var e})),_:1})}}};export{fs as default};
