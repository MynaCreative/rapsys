import{r as e,T as a,x as t,o as s,D as l,w as r,a as i,u as n,Z as o,b as d,e as c,t as m,c as u,q as p,F as f,E as b,U as v,n as g,i as _,I as h,a5 as j,A as x,h as k}from"./app-DSTM3SJ3.js";import{_ as y}from"./Main-B6b0oP4E.js";import{_ as D}from"./PageHeader-BsnaedmG.js";import w from"./Header-D18qeIqc.js";import M from"./Line-W7OW7rK-.js";import U from"./Dist-Cd7_6IrF.js";import{e as V,s as C}from"./service-bYEantlz.js";import"./logo-light-fEv4Yehr.js";import"./sweetalert2.all-BaCSOYxu.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./Footer-Dv8wUYbi.js";import"./v-money3-DJeuOA-S.js";import"./_baseIteratee-B6jT-w-C.js";import"./vue-select-BtwHA1xE.js";import"./Manual-8NaW6saC.js";import"./ManualCreate-DxirA-nT.js";import"./Modal-1mpmqj-q.js";import"./ManualForm-CTxR-2Y-.js";import"./ManualItem-CDnFjWkj.js";import"./ManualUpdate-D8oXUluW.js";import"./Upload-CsuogaS-.js";import"./UploadItem-B4otxYuT.js";import"./SmuPreview-UvqyOs8r.js";import"./sumBy-Dyr7MREM.js";import"./UploadForm-Cp1V96kN.js";import"./UploadModal-OEm2JsZq.js";const F={class:"card"},I={class:"card-header align-items-center d-flex"},P={class:"flex-grow-1 oveflow-hidden"},Y={class:"modal-title"},z=d("div",{class:"flex-shrink-0 ms-2"},[d("ul",{class:"nav justify-content-end nav-tabs-custom rounded card-header-tabs border-bottom-0",role:"tablist"},[d("li",{class:"nav-item"},[d("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#header",role:"tab"}," Header ")]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#line",role:"tab"}," Line ")]),d("li",{class:"nav-item"},[d("a",{class:"nav-link","data-bs-toggle":"tab",href:"#dist",role:"tab"}," Dist ")])])],-1),H={key:0,class:"ps-3 pt-3"},$=d("i",{class:"ri-error-warning-line me-3 align-middle fs-16 text-danger"},null,-1),B={class:"tab-content text-muted"},S={class:"tab-pane active",id:"header",role:"tabpanel"},q={class:"tab-content text-muted"},A={class:"tab-pane",id:"line",role:"tabpanel"},E={class:"tab-content text-muted"},L={class:"tab-pane",id:"dist",role:"tabpanel"},O={class:"card-footer d-flex justify-content-between"},G=d("i",{class:"ri-arrow-go-forward-line align-bottom me-1"},null,-1),J={__name:"Form",props:["references","model"],setup(J){const T=e(null),K=V().page,N=h().appContext.config.globalProperties.$dayjs,Q=[{text:"Dashboard",to:route("dashboard")},{text:"Transaction"},{text:"Invoice",to:route("transaction.invoices.index")},{text:"Form",active:!0}],R=J,W=a(R.model?{...R.model}:V().form);t((()=>{if(!W.id){let e=N().format("YYYY-MM-DD");W.invoice_date=e,W.posting_date=e,W.term_date=e,W.due_date=e,W.invoice_receipt_date=e,W.supplier_tax_invoice_date=e}}));const X=()=>{C.submitData(W,W.id)},Z=e=>{C.saveData(W,e)},ee=()=>{C.validateData(W)};return(e,a)=>{const t=j,h=x,V=k;return s(),l(y,null,{header:r((()=>[i(D,{title:n(K).title,breadcrumbs:Q},null,8,["title"])])),default:r((()=>[i(n(o),{title:n(K).title},null,8,["title"]),d("div",F,[d("div",I,[d("div",P,[d("h5",Y,[c(" Form "+m(n(W).id?"Update":"Create")+" - "+m(n(K).title)+" "+m(n(W).invoice_number?` [${n(W).invoice_number}]`:"")+" ",1),n(W).id?(s(),u(f,{key:0},["draft"==n(W).document_status?(s(),l(t,{key:0,variant:"light",class:"text-capitalize"},{default:r((()=>[c(m(n(W).document_status),1)])),_:1})):p("",!0),"published"==n(W).document_status?(s(),l(t,{key:1,variant:"soft-primary",class:"text-primary text-capitalize"},{default:r((()=>[c(m(n(W).document_status),1)])),_:1})):p("",!0),"cancelled"==n(W).document_status?(s(),l(t,{key:2,variant:"soft-danger",class:"text-danger text-capitalize"},{default:r((()=>[c(m(n(W).document_status),1)])),_:1})):p("",!0),"closed"==n(W).document_status?(s(),l(t,{key:3,variant:"soft-success",class:"text-success text-capitalize"},{default:r((()=>[c(m(n(W).document_status),1)])),_:1})):p("",!0)],64)):p("",!0)])]),z]),d("form",{ref_key:"formElement",ref:T},[Object.keys(n(W).errors).length?(s(),u("div",H,[i(h,{modelValue:!!n(W).errors.error,variant:"danger"},{default:r((()=>[c(m(n(W).errors.error),1)])),_:1},8,["modelValue"]),i(h,{modelValue:!!n(W).errors.exception,variant:"danger"},{default:r((()=>[c(m(n(W).errors.exception),1)])),_:1},8,["modelValue"]),i(h,{modelValue:!!n(W).errors,variant:"danger",class:"alert-top-border"},{default:r((()=>[(s(!0),u(f,null,b(n(W).errors,((e,a)=>(s(),u("div",{key:a,class:"mb-1"},[$,c(" "+m(e),1)])))),128))])),_:1},8,["modelValue"])])):p("",!0),d("div",B,[d("div",S,[i(w,{formData:n(W),"onUpdate:formData":a[0]||(a[0]=e=>v(W)?W.value=e:null),references:J.references},null,8,["formData","references"])])]),d("div",q,[d("div",A,[i(M,{formData:n(W),"onUpdate:formData":a[1]||(a[1]=e=>v(W)?W.value=e:null),references:J.references},null,8,["formData","references"])])]),d("div",E,[d("div",L,[i(U,{formData:n(W),"onUpdate:formData":a[2]||(a[2]=e=>v(W)?W.value=e:null),references:J.references},null,8,["formData","references"])])]),d("div",O,[d("div",null,[n(W).id&&!["published","closed","cancelled"].includes(n(W).document_status)?(s(),l(V,{key:0,onClick:X,variant:"primary",class:"btn-label waves-effect waves-light me-1",disabled:n(W).processing},{default:r((()=>[d("i",{class:g(["label-icon align-middle fs-16 me-2",n(W).processing?"ri-refresh-line":"ri-save-line"])},null,2),c(" "+m(n(W).processing?"Processing":"Submit"),1)])),_:1},8,["disabled"])):p("",!0),n(W).id&&!["published","closed","cancelled"].includes(n(W).document_status)?(s(),l(V,{key:1,onClick:ee,type:"submit",variant:"warning",class:"btn-label waves-effect waves-light right me-1",disabled:n(W).processing},{default:r((()=>[d("i",{class:g(["label-icon align-middle fs-16 ms-2",n(W).processing?"ri-refresh-line":"ri-check-line"])},null,2),c(" "+m(n(W).processing?"Validating":"Validate"),1)])),_:1},8,["disabled"])):p("",!0),n(W).id&&["published","closed","cancelled"].includes(n(W).document_status)?p("",!0):(s(),l(V,{key:2,onClick:a[3]||(a[3]=e=>Z("draft")),type:"submit",variant:"light",class:"btn-label waves-effect waves-light right",disabled:n(W).processing},{default:r((()=>[d("i",{class:g(["label-icon align-middle fs-16 ms-2",n(W).processing?"ri-refresh-line":"ri-save-2-line"])},null,2),c(" "+m(n(W).processing?"Processing":"Save as Draft"),1)])),_:1},8,["disabled"])),"closed"==n(W).document_status?(s(),l(V,{key:3,onClick:a[4]||(a[4]=e=>Z("void")),type:"submit",variant:"danger",class:"btn-label waves-effect waves-light right",disabled:n(W).processing},{default:r((()=>[d("i",{class:g(["label-icon align-middle fs-16 ms-2",n(W).processing?"ri-refresh-line":"ri-close-line"])},null,2),c(" "+m(n(W).processing?"Processing":"Void"),1)])),_:1},8,["disabled"])):p("",!0)]),i(n(_),{href:e.route(`${n(K).module}.${n(K).name}.index`),class:"btn btn-info me-1"},{default:r((()=>[G,c(" Back ")])),_:1},8,["href"])])],512)])])),_:1})}}};export{J as default};
