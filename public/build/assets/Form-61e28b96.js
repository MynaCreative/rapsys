import{r as e,T as a,C as t,D as s,w as l,E as i,o as r,a as n,u as o,Z as d,b as c,e as m,t as u,c as p,m as f,F as b,G as v,v as g,n as _,i as h,aa as j,A as x,g as y}from"./app-30e0783b.js";import{_ as k}from"./Main-7c4d393d.js";import{_ as w}from"./PageHeader-5f27e6fb.js";import D from"./Header-baa17c42.js";import M from"./Line-7849e90f.js";import V from"./Dist-95dc0011.js";import{e as C,s as U}from"./service-8a332ed7.js";import"./logo-light-68509ea3.js";import"./sweetalert2.all-aaaa6da5.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Footer-61ce5cc7.js";import"./v-money3-eb747145.js";import"./_baseIteratee-99fb9f0f.js";import"./multiselect-31bf4223.js";import"./Manual-8e16a640.js";import"./ManualCreate-b125300d.js";import"./Modal-36df24f3.js";import"./ManualForm-a9339eae.js";import"./ManualItem-e77a9a3c.js";import"./ManualUpdate-83b722dd.js";import"./Upload-72131194.js";import"./UploadItem-721341d1.js";import"./SmuPreview-83d16976.js";import"./sumBy-51908caf.js";import"./UploadForm-1c4d5a4f.js";import"./UploadModal-70f92453.js";const F={class:"card"},P={class:"card-header align-items-center d-flex"},z={class:"flex-grow-1 oveflow-hidden"},I={class:"modal-title"},Y=c("div",{class:"flex-shrink-0 ms-2"},[c("ul",{class:"nav justify-content-end nav-tabs-custom rounded card-header-tabs border-bottom-0",role:"tablist"},[c("li",{class:"nav-item"},[c("a",{class:"nav-link active","data-bs-toggle":"tab",href:"#header",role:"tab"}," Header ")]),c("li",{class:"nav-item"},[c("a",{class:"nav-link","data-bs-toggle":"tab",href:"#line",role:"tab"}," Line ")]),c("li",{class:"nav-item"},[c("a",{class:"nav-link","data-bs-toggle":"tab",href:"#dist",role:"tab"}," Dist ")])])],-1),$={key:0,class:"ps-3 pt-3"},H=c("i",{class:"ri-error-warning-line me-3 align-middle fs-16 text-danger"},null,-1),S={class:"tab-content text-muted"},A={class:"tab-pane active",id:"header",role:"tabpanel"},B={class:"tab-content text-muted"},E={class:"tab-pane",id:"line",role:"tabpanel"},L={class:"tab-content text-muted"},G={class:"tab-pane",id:"dist",role:"tabpanel"},O={class:"card-footer d-flex justify-content-between"},T=c("i",{class:"ri-arrow-go-forward-line align-bottom me-1"},null,-1),q={__name:"Form",props:["references","model"],setup(q){const J=q,K=e(null),N=C().page,Q=i().appContext.config.globalProperties.$dayjs,R=[{text:"Dashboard",to:route("dashboard")},{text:"Transaction"},{text:"Invoice",to:route("transaction.invoices.index")},{text:"Form",active:!0}],W=a(J.model?{...J.model}:C().form);t((()=>{if(!W.id){let e=Q().format("YYYY-MM-DD");W.invoice_date=e,W.posting_date=e,W.term_date=e,W.due_date=e,W.invoice_receipt_date=e,W.supplier_tax_invoice_date=e}}));const X=()=>{U.submitData(W,W.id)},Z=e=>{U.saveData(W,e)},ee=()=>{U.validateData(W)};return(e,a)=>{const t=j,i=x,C=y;return r(),s(k,null,{header:l((()=>[n(w,{title:o(N).title,breadcrumbs:R},null,8,["title"])])),default:l((()=>[n(o(d),{title:o(N).title},null,8,["title"]),c("div",F,[c("div",P,[c("div",z,[c("h5",I,[m(" Form "+u(o(W).id?"Update":"Create")+" - "+u(o(N).title)+" "+u(o(W).invoice_number?` [${o(W).invoice_number}]`:"")+" ",1),o(W).id?(r(),p(b,{key:0},["draft"==o(W).document_status?(r(),s(t,{key:0,variant:"light",class:"text-capitalize"},{default:l((()=>[m(u(o(W).document_status),1)])),_:1})):f("",!0),"published"==o(W).document_status?(r(),s(t,{key:1,variant:"soft-primary",class:"text-primary text-capitalize"},{default:l((()=>[m(u(o(W).document_status),1)])),_:1})):f("",!0),"cancelled"==o(W).document_status?(r(),s(t,{key:2,variant:"soft-danger",class:"text-danger text-capitalize"},{default:l((()=>[m(u(o(W).document_status),1)])),_:1})):f("",!0),"closed"==o(W).document_status?(r(),s(t,{key:3,variant:"soft-success",class:"text-success text-capitalize"},{default:l((()=>[m(u(o(W).document_status),1)])),_:1})):f("",!0)],64)):f("",!0)])]),Y]),c("form",{ref_key:"formElement",ref:K},[Object.keys(o(W).errors).length?(r(),p("div",$,[n(i,{modelValue:!!o(W).errors.error,variant:"danger"},{default:l((()=>[m(u(o(W).errors.error),1)])),_:1},8,["modelValue"]),n(i,{modelValue:!!o(W).errors.exception,variant:"danger"},{default:l((()=>[m(u(o(W).errors.exception),1)])),_:1},8,["modelValue"]),n(i,{modelValue:!!o(W).errors,variant:"danger",class:"alert-top-border"},{default:l((()=>[(r(!0),p(b,null,v(o(W).errors,((e,a)=>(r(),p("div",{key:a,class:"mb-1"},[H,m(" "+u(e),1)])))),128))])),_:1},8,["modelValue"])])):f("",!0),c("div",S,[c("div",A,[n(D,{formData:o(W),"onUpdate:formData":a[0]||(a[0]=e=>g(W)?W.value=e:null),references:q.references},null,8,["formData","references"])])]),c("div",B,[c("div",E,[n(M,{formData:o(W),"onUpdate:formData":a[1]||(a[1]=e=>g(W)?W.value=e:null),references:q.references},null,8,["formData","references"])])]),c("div",L,[c("div",G,[n(V,{formData:o(W),"onUpdate:formData":a[2]||(a[2]=e=>g(W)?W.value=e:null),references:q.references},null,8,["formData","references"])])]),c("div",O,[c("div",null,[o(W).id&&!["published","closed","cancelled"].includes(o(W).document_status)?(r(),s(C,{key:0,onClick:X,variant:"primary",class:"btn-label waves-effect waves-light me-1",disabled:o(W).processing},{default:l((()=>[c("i",{class:_(["label-icon align-middle fs-16 me-2",o(W).processing?"ri-refresh-line":"ri-save-line"])},null,2),m(" "+u(o(W).processing?"Processing":"Submit"),1)])),_:1},8,["disabled"])):f("",!0),o(W).id&&!["published","closed","cancelled"].includes(o(W).document_status)?(r(),s(C,{key:1,onClick:ee,type:"submit",variant:"warning",class:"btn-label waves-effect waves-light right me-1",disabled:o(W).processing},{default:l((()=>[c("i",{class:_(["label-icon align-middle fs-16 ms-2",o(W).processing?"ri-refresh-line":"ri-check-line"])},null,2),m(" "+u(o(W).processing?"Validating":"Validate"),1)])),_:1},8,["disabled"])):f("",!0),o(W).id&&["published","closed","cancelled"].includes(o(W).document_status)?f("",!0):(r(),s(C,{key:2,onClick:a[3]||(a[3]=e=>Z("draft")),type:"submit",variant:"light",class:"btn-label waves-effect waves-light right",disabled:o(W).processing},{default:l((()=>[c("i",{class:_(["label-icon align-middle fs-16 ms-2",o(W).processing?"ri-refresh-line":"ri-save-2-line"])},null,2),m(" "+u(o(W).processing?"Processing":"Save as Draft"),1)])),_:1},8,["disabled"])),"closed"==o(W).document_status?(r(),s(C,{key:3,onClick:a[4]||(a[4]=e=>Z("void")),type:"submit",variant:"danger",class:"btn-label waves-effect waves-light right",disabled:o(W).processing},{default:l((()=>[c("i",{class:_(["label-icon align-middle fs-16 ms-2",o(W).processing?"ri-refresh-line":"ri-close-line"])},null,2),m(" "+u(o(W).processing?"Processing":"Void"),1)])),_:1},8,["disabled"])):f("",!0)]),n(o(h),{href:e.route(`${o(N).module}.${o(N).name}.index`),class:"btn btn-info me-1"},{default:l((()=>[T,m(" Back ")])),_:1},8,["href"])])],512)])])),_:1})}}};export{q as default};
