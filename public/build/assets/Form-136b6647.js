import{o as a,c as e,t as s,B as l,T as t,C as d,D as i,w as c,E as o,a as r,u as n,Z as m,b as p,e as u,i as v,G as b,m as f,F as g,d as h,H as x,I as w}from"./app-891c8d04.js";import{_ as y}from"./Main-292273c6.js";import{_}from"./PageHeader-2bee4ef0.js";import{_ as k}from"./Timestamp-4502638c.js";import{e as D}from"./entity-57c3172e.js";import"./sweetalert2.all-3ba2fbff.js";import"./logo-light-68509ea3.js";import"./_plugin-vue_export-helper-1b428a4d.js";import"./Footer-8715fbbc.js";const j={key:0},T={key:1},C={__name:"Date",props:{data:{required:!0}},setup:l=>(t,d)=>l.data?(a(),e("span",j,s(t.$dayjs(l.data).format("DD MMM, YYYY")),1)):(a(),e("span",T," -- "))},S=D().page,A={async showData(a,e){const{data:s}=await l.get(route(`${S.name}.show`,e));Object.keys(s).forEach((e=>{a[e]=s[e]}))},submitData(a,e,s){let l=route(`${S.name}.update`,a.id);a.submit("patch",l,{onSuccess:()=>{a.reset(),a.clearErrors()}})}},I={class:"row"},M={class:"col-lg-12"},Y={class:"tab-content text-muted"},E={class:"tab-pane fade show active",id:"project-overview",role:"tabpanel"},F={class:"row"},z={class:"col-xl-8 col-lg-8"},$={class:"card"},B={class:"card-body"},L={class:"text-muted"},P={class:"pt-3 border-top border-top-dashed mt-4"},U={class:"row"},V={class:"col-lg-3 col-sm-6 mb-4"},G=p("p",{class:"mb-2 text-uppercase fw-medium"},"Created Date",-1),H={class:"fs-15 mb-0"},N={class:"col-lg-3 col-sm-6 mb-4"},R=p("p",{class:"mb-2 text-uppercase fw-medium"},"Updated Date",-1),q={class:"fs-15 mb-0"},O={class:"col-lg-3 col-sm-6 mb-4"},Z=p("p",{class:"mb-2 text-uppercase fw-medium"},"Invoice Date",-1),J={class:"fs-15 mb-0"},K={class:"col-lg-3 col-sm-6 mb-4"},Q=p("p",{class:"mb-2 text-uppercase fw-medium"},"Posting Date",-1),W={class:"fs-15 mb-0"},X={class:"col-lg-3 col-sm-6 mb-4"},aa=p("p",{class:"mb-2 text-uppercase fw-medium"},"Term Date",-1),ea={class:"fs-15 mb-0"},sa={class:"col-lg-3 col-sm-6 mb-4"},la=p("p",{class:"mb-2 text-uppercase fw-medium"},"Due Date",-1),ta={class:"fs-15 mb-0"},da={class:"col-lg-3 col-sm-6 mb-4"},ia=p("p",{class:"mb-2 text-uppercase fw-medium"},"Supplier Inv Date",-1),ca={class:"fs-15 mb-0"},oa={class:"col-lg-3 col-sm-6 mb-4"},ra=p("p",{class:"mb-2 text-uppercase fw-medium"},"Receipt Date",-1),na={class:"fs-15 mb-0"},ma={class:"col-lg-3 col-sm-6 mb-4"},pa=p("p",{class:"mb-2 text-uppercase fw-medium"},"Term",-1),ua={class:"badge text-bg-warning fs-12"},va={class:"col-lg-3 col-sm-6 mb-4"},ba=p("p",{class:"mb-2 text-uppercase fw-medium"},"Invoice Type",-1),fa={class:"badge text-bg-info fs-12"},ga={class:"col-lg-3 col-sm-6 mb-4"},ha=p("p",{class:"mb-2 text-uppercase fw-medium"},"Currency",-1),xa={class:"badge text-bg-secondary fs-12"},wa=p("h6",{class:"mb-3 fw-semibold text-uppercase"},"Note",-1),ya={class:"pt-3 border-top border-top-dashed mt-4"},_a=p("h6",{class:"mb-3 fw-semibold text-uppercase"},"Attachments",-1),ka={class:"row g-3"},Da={class:"border rounded border-dashed p-2"},ja={class:"d-flex align-items-center"},Ta={class:"flex-shrink-0 me-3"},Ca={key:0,class:"avatar-title bg-light rounded fs-24 shadow shadow",style:{color:"#bf2718"}},Sa=[p("i",{class:"ri-file-text-line"},null,-1)],Aa={key:1,class:"avatar-title bg-light text-primary rounded fs-24 shadow shadow"},Ia=[p("i",{class:"ri-file-word-line"},null,-1)],Ma={key:2,class:"avatar-title bg-light text-success rounded fs-24 shadow shadow"},Ya=[p("i",{class:"ri-file-excel-line"},null,-1)],Ea={key:3,class:"avatar-title bg-light text-warning rounded fs-24 shadow shadow"},Fa=[p("i",{class:"ri-image-line"},null,-1)],za={key:4,class:"avatar-title bg-light rounded fs-24 shadow shadow",style:{color:"#3a3ca1"}},$a=[p("i",{class:"ri-file-zip-line"},null,-1)],Ba={class:"flex-grow-1 overflow-hidden"},La={class:"fs-13 mb-1"},Pa=["href"],Ua={class:"flex-shrink-0 ms-2"},Va={class:"d-flex gap-1"},Ga=["href"],Ha=[p("i",{class:"ri-download-2-line"},null,-1)],Na={class:"card"},Ra=p("div",{class:"card-header align-items-center d-flex"},[p("h4",{class:"card-title mb-0 flex-grow-1"},"Approver Action")],-1),qa={class:"card-body"},Oa=["onSubmit"],Za={class:"row g-3"},Ja={class:"col-12"},Ka=p("label",{for:"exampleFormControlTextarea1",class:"form-label text-body"},"Note",-1),Qa={class:"col-12 text-end"},Wa={class:"col-xl-4 col-lg-4"},Xa={class:"card"},ae={class:"card-body p-4"},ee={class:"mt-4 text-center"},se={class:"mb-1"},le={class:"text-muted"},te={class:"table-responsive"},de={class:"table mb-0 table-borderless"},ie=p("th",null,[p("span",{class:"fw-medium"},"SBU")],-1),ce=p("th",null,[p("span",{class:"fw-medium"},"Interco")],-1),oe=p("th",null,[p("span",{class:"fw-medium"},"Vendor")],-1),re=p("th",null,[p("span",{class:"fw-medium"},"Vendor Site")],-1),ne=p("th",null,[p("span",{class:"fw-medium"},"Invoice Type")],-1),me=p("th",null,[p("span",{class:"fw-medium"},"Currency")],-1),pe=p("th",null,[p("span",{class:"fw-medium"},"Supplier Tax Inv")],-1),ue={class:"card-body p-4 border-top border-top-dashed"},ve=p("h6",{class:"text-muted text-uppercase fw-semibold mb-4"},"Amount After Tax",-1),be={class:"table-responsive"},fe={class:"table mb-0 table-borderless"},ge=p("th",null,[p("span",{class:"fw-medium"},"Total")],-1),he={class:"text-end"},xe=p("th",null,[p("span",{class:"fw-medium"},"Total Valid")],-1),we={class:"text-end"},ye=p("th",null,[p("span",{class:"fw-medium"},"Total Invalid")],-1),_e={class:"text-end"},ke=p("div",{class:"card"},[p("div",{class:"card-body"},[p("h5",{class:"card-title mb-4"},"Expenses"),p("div",{class:"d-flex flex-wrap gap-2 fs-16"},[p("div",{class:"badge fw-medium badge-soft-secondary"},"SMU")])])],-1),De={class:"card"},je=p("div",{class:"card-header align-items-center d-flex border-bottom-dashed"},[p("h4",{class:"card-title mb-0 flex-grow-1"},"Approvers")],-1),Te={class:"card-body"},Ce={"data-simplebar":"",style:{height:"150px"},class:"mx-n3 px-3"},Se={class:"vstack gap-3"},Ae={class:"avatar-xs flex-shrink-0 me-3"},Ie=["src"],Me={class:"flex-grow-1"},Ye={class:"fs-13 mb-0"},Ee={href:"#",class:"text-body d-block"},Fe={__name:"Form",props:["references","model"],setup(l){const j=l,T=D().page,S=o().appContext.config.globalProperties.$dayjs,Fe=[{text:"Dashboard",to:route("dashboard")},{text:T.title,active:!0}],ze=t(j.model?{...j.model}:D().form);d((()=>{if(!ze.id){let a=S().format("YYYY-MM-DD");ze.invoice_date=a,ze.posting_date=a,ze.term_date=a,ze.due_date=a,ze.invoice_receipt_date=a,ze.supplier_tax_invoice_date=a}}));const $e=()=>{A.submitData(ze,ze.id)},Be=a=>a.url?"/"+a.url+"/"+a.storage:"javascript:void(0)";return(l,t)=>(a(),i(y,null,{header:c((()=>[r(_,{title:n(T).title,breadcrumbs:Fe},null,8,["title"])])),default:c((()=>[r(n(m),{title:n(T).title},null,8,["title"]),p("div",I,[p("div",M,[p("div",Y,[p("div",E,[p("div",F,[p("div",z,[p("div",$,[p("div",B,[p("div",L,[p("div",P,[p("div",U,[p("div",V,[p("div",null,[G,p("h5",H,[r(k,{data:n(ze).created_at},null,8,["data"])])])]),p("div",N,[p("div",null,[R,p("h5",q,[r(k,{data:n(ze).updated_at},null,8,["data"])])])]),p("div",O,[p("div",null,[Z,p("h5",J,[r(C,{data:n(ze).invoice_date},null,8,["data"])])])]),p("div",K,[p("div",null,[Q,p("h5",W,[r(C,{data:n(ze).posting_date},null,8,["data"])])])]),p("div",X,[p("div",null,[aa,p("h5",ea,[r(C,{data:n(ze).term_date},null,8,["data"])])])]),p("div",sa,[p("div",null,[la,p("h5",ta,[r(C,{data:n(ze).due_date},null,8,["data"])])])]),p("div",da,[p("div",null,[ia,p("h5",ca,[r(C,{data:n(ze).supplier_tax_invoice_date},null,8,["data"])])])]),p("div",oa,[p("div",null,[ra,p("h5",na,[r(C,{data:n(ze).invoice_receipt_date},null,8,["data"])])])]),p("div",ma,[p("div",null,[pa,p("div",ua,s(n(ze).term?.name),1)])]),p("div",va,[p("div",null,[ba,p("div",fa,s(n(ze).invoice_type?.name),1)])]),p("div",ga,[p("div",null,[ha,p("div",xa,s(n(ze).currency?.name),1)])])])]),wa,p("p",null,s(n(ze).note),1),p("div",null,[r(n(v),{href:l.route("transaction.invoices.edit",n(ze).id),class:"btn btn-link link-success p-0 shadow-none"},{default:c((()=>[u("Detail Invoice")])),_:1},8,["href"])]),p("div",ya,[_a,p("div",ka,[(a(!0),e(g,null,b(n(ze).attachments,((l,t)=>{return a(),e("div",{class:"col-xxl-4 col-lg-6",key:t},[p("div",Da,[p("div",ja,[p("div",Ta,["application/pdf"==l.type?(a(),e("div",Ca,Sa)):f("",!0),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==l.type?(a(),e("div",Aa,Ia)):f("",!0),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==l.type?(a(),e("div",Ma,Ya)):f("",!0),["image/jpg","image/jpeg","image/png"].includes(l.type)?(a(),e("div",Ea,Fa)):f("",!0),["application/zip","application/x-zip-compressed","multipart/x-zip","application/vnd.rar","application/x-rar-compressed",""].includes(l.type)?(a(),e("div",za,$a)):f("",!0)]),p("div",Ba,[p("h5",La,[p("a",{href:Be(l),target:"_blank",class:"text-body text-truncate d-block"},s(l.name),9,Pa)]),p("div",null,s((d=l.size,(i=Math,c=i.log,o=c(d)/c(1e3)|0,d/i.pow(1e3,o)).toFixed(2)+" "+(o?"kMGTPEZY"[--o]+"B":"Bytes"))),1)]),p("div",Ua,[p("div",Va,[n(ze).id?(a(),e("a",{key:0,class:"btn btn-icon text-muted btn-sm fs-18 shadow-none",href:Be(l),target:"_blank"},Ha,8,Ga)):f("",!0)])])])])]);var d,i,c,o})),128))])])])])]),p("div",Na,[Ra,p("div",qa,[p("form",{onSubmit:h($e,["prevent"]),class:"mt-4"},[p("div",Za,[p("div",Ja,[Ka,x(p("textarea",{class:"form-control bg-light border-light",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":t[0]||(t[0]=a=>n(ze).approval_note=a)},null,512),[[w,n(ze).approval_note]])]),p("div",Qa,[p("button",{type:"submit",onClick:t[1]||(t[1]=a=>n(ze).approval_status="rejected"),class:"btn btn-danger mx-2"},"Reject"),p("button",{type:"submit",onClick:t[2]||(t[2]=a=>n(ze).approval_status="approved"),class:"btn btn-success"},"Approve")])])],40,Oa)])])]),p("div",Wa,[p("div",Xa,[p("div",ae,[p("div",ee,[p("h5",se,s(n(ze).code),1),p("p",le,s(n(ze).department?.name),1)]),p("div",te,[p("table",de,[p("tbody",null,[p("tr",null,[ie,p("td",null,s(n(ze).sbu?.name),1)]),p("tr",null,[ce,p("td",null,s(n(ze).interco?.name),1)]),p("tr",null,[oe,p("td",null,s(n(ze).vendor?.name),1)]),p("tr",null,[re,p("td",null,s(n(ze).vendor_site?.name),1)]),p("tr",null,[ne,p("td",null,s(n(ze).invoice_type?.name),1)]),p("tr",null,[me,p("td",null,s(n(ze).currency?.name),1)]),p("tr",null,[pe,p("td",null,s(n(ze).supplier_tax_invoice),1)])])])])]),p("div",ue,[ve,p("div",be,[p("table",fe,[p("tbody",null,[p("tr",null,[ge,p("td",he,s(n(ze).total_amount_after_tax.toLocaleString()),1)]),p("tr",null,[xe,p("td",we,s(n(ze).total_amount_valid.toLocaleString()),1)]),p("tr",null,[ye,p("td",_e,s(n(ze).total_amount_invalid.toLocaleString()),1)])])])])])]),ke,p("div",De,[je,p("div",Te,[p("div",Ce,[p("div",Se,[(a(!0),e(g,null,b(n(ze).approvals,(l=>(a(),e("div",{class:"d-flex align-items-center",key:l.id},[p("div",Ae,[p("img",{src:`/img/initials/${l.user?.name.charAt(0).toLowerCase()}.png`,class:"img-fluid rounded-circle shadow"},null,8,Ie)]),p("div",Me,[p("h5",Ye,[p("a",Ee,s(l.user?.name),1)])])])))),128))])])])])])])])])])])])),_:1}))}};export{Fe as default};
