import{l as e,r as a,v as l,o as i,c as r,b as d,a as n,n as s,u as t,L as o,t as c,e as u,F as v,E as p,q as m,d as b,I as f,J as _,g,ag as y,f as k}from"./app-C9OX3ezV.js";import{d as h}from"./v-money3-x7_rWlX1.js";import{k as x,i as V,_ as M,a as T,b as H}from"./_baseIteratee-DO6jvHPo.js";import{C as L}from"./vue-select-BhTkIImE.js";var w=function(e){return function(a,l,i){for(var r=-1,d=Object(a),n=i(a),s=n.length;s--;){var t=n[e?s:++r];if(!1===l(d[t],t,d))break}return a}}(),D=x;var U=V;var Y=function(e,a){return function(l,i){if(null==l)return l;if(!U(l))return e(l,i);for(var r=l.length,d=a?r:-1,n=Object(l);(a?d--:++d<r)&&!1!==i(n[d],d,n););return l}}((function(e,a){return e&&w(e,a,D)}));var j=T,q=function(e,a){var l=[];return Y(e,(function(e,i,r){a(e,i,r)&&l.push(e)})),l},I=M,C=H;const z=e((function(e,a){return(C(e)?j:q)(e,I(a))})),P={class:"card-body"},S={class:"row g-4 mb-4"},B={class:"col-md-6 col-lg-2"},N=d("label",{for:"department",class:"form-label required"},"Department",-1),A={class:"col-md-6 col-lg-2"},E=d("label",{for:"sbu",class:"form-label required"},"SBU",-1),F={class:"col-md-6 col-lg-2"},G=d("label",{for:"invoice_type",class:"form-label required"},"Invoice Type",-1),O={class:"col-md-6 col-lg-2"},J=d("label",{for:"currency",class:"form-label required"},"Currency",-1),R={class:"col-md-6 col-lg-4"},Z=d("label",{for:"interco",class:"form-label required"},"Interco",-1),$=d("hr",null,null,-1),K={class:"row g-4 mb-2"},Q={class:"col-lg-4"},W=d("label",{for:"invoice_number",class:"form-label required"},"Invoice Number",-1),X={class:"col-lg-4"},ee=d("label",{for:"total_amount",class:"form-label"},"Invoice Amount",-1),ae={class:"col-lg-4"},le=d("label",{for:"code",class:"form-label"},"Code",-1),ie=["value"],re={class:"row g-4 mb-2"},de={class:"col-lg-4"},ne=d("label",{for:"vendor",class:"form-label required"},"Vendor",-1),se={class:"col-lg-4"},te=d("label",{for:"invoice_date",class:"form-label required"},"Invoice Date",-1),oe={class:"col-lg-4"},ce=d("label",{for:"posting_date",class:"form-label required"},"Posting Date",-1),ue={class:"row g-4 mb-2"},ve={class:"col-lg-4"},pe=d("label",{for:"vendor_site",class:"form-label required"},"Vendor Site",-1),me={class:"col-lg-4"},be=d("label",{for:"invoice_receipt_date",class:"form-label required"},"Receipt Date",-1),fe={class:"col-lg-4"},_e=d("label",{for:"term_date",class:"form-label"},"Term Date",-1),ge={class:"row g-4 mb-2"},ye={class:"col-lg-2"},ke=d("label",{for:"supplier_tax_invoice",class:"form-label"},"Supplier Tax Invoice",-1),he={class:"col-lg-2"},xe=d("label",{for:"term",class:"form-label required"},"Payment Term",-1),Ve={class:"col-lg-4"},Me=d("label",{for:"supplier_tax_invoice_date",class:"form-label"},"Supplier Tax Invoice Date",-1),Te={class:"col-lg-4"},He=d("label",{for:"due_date",class:"form-label"},"Due Date",-1),Le={class:"row g-2 mb-2"},we={class:"col-lg-12"},De=d("label",{for:"note",class:"form-label required"},"Note / Description",-1),Ue=d("hr",null,null,-1),Ye={class:"row g-2"},je={class:"col-lg-12"},qe={class:"align-items-center d-flex mb-3"},Ie={class:"card-title mb-0 flex-grow-1"},Ce={class:"flex-shrink-0"},ze=d("i",{class:"ri-upload-2-fill me-1 align-bottom"},null,-1),Pe={class:"g-2"},Se={key:0,class:"vstack gap-2"},Be={class:"d-flex align-items-center"},Ne={class:"flex-shrink-0 me-3"},Ae={class:"avatar-sm"},Ee={key:0,class:"avatar-title bg-light rounded fs-24 shadow",style:{color:"#bf2718"}},Fe=[d("i",{class:"ri-file-text-line"},null,-1)],Ge={key:1,class:"avatar-title bg-light text-primary rounded fs-24 shadow"},Oe=[d("i",{class:"ri-file-word-line"},null,-1)],Je={key:2,class:"avatar-title bg-light text-success rounded fs-24 shadow"},Re=[d("i",{class:"ri-file-excel-line"},null,-1)],Ze={key:3,class:"avatar-title bg-light text-warning rounded fs-24 shadow"},$e=[d("i",{class:"ri-image-line"},null,-1)],Ke={key:4,class:"avatar-title bg-light rounded fs-24 shadow",style:{color:"#3a3ca1"}},Qe=[d("i",{class:"ri-file-zip-line"},null,-1)],We={class:"flex-grow-1 overflow-hidden"},Xe={class:"fs-13 mb-1"},ea={href:"javascript:void(0);",class:"text-body text-truncate d-block"},aa={class:"flex-shrink-0 ms-2"},la={class:"d-flex gap-1"},ia=["href"],ra=[d("i",{class:"ri-download-2-line"},null,-1)],da=["onClick"],na=[d("i",{class:"ri-delete-bin-line"},null,-1)],sa={key:1,class:"vstack gap-2"},ta=[k('<div class="d-flex align-items-center"><div class="flex-shrink-0 me-3"><div class="avatar-sm"><div class="avatar-title bg-light text-muted rounded fs-24 shadow"><i class="ri-cloud-off-line"></i></div></div></div><div class="flex-grow-1 overflow-hidden"><h5 class="fs-13 mb-1"><a href="javascript:void(0);" class="text-body text-truncate d-block">No attachment on this invoice</a></h5><div>Please upload the file relating to this invoice.</div></div></div>',1)],oa={__name:"Header",props:["formData","references"],emits:["update:formData"],setup(e,{emit:k}){const x=e,V=k,M=a("attachment_file"),T=f().appContext.config.globalProperties.$dayjs,H=l({get:()=>x.formData,set(e){V("update:formData",e)}}),w=e=>{H.value.due_date=T(e).add(H.value.term.day,"day").format("YYYY-MM-DD"),H.value.term_date=T(e).add(H.value.term.day,"day").format("YYYY-MM-DD")},D=l((()=>z(x.references.vendor_sites,(e=>e.vendor_id==H.value.vendor_id)))),U=e=>{M.value.click()},Y=e=>{e.target.files&&H.value.attachments.push(...e.target.files)},j={precision:0,masked:!1};return(a,l)=>{const f=_,k=g,x=y;return i(),r("div",P,[d("div",S,[d("div",B,[N,n(t(L),{id:"department",modelValue:H.value.department_id,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value.department_id=e),options:e.references.departments,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.department_id}),"aria-describedby":"input-department-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-department-feedback",innerHTML:H.value.errors.department_id},null,8,["innerHTML"])]),d("div",A,[E,n(t(L),{id:"sbu",modelValue:H.value.sbu_id,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value.sbu_id=e),options:e.references.sbus,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.sbu_id}),"aria-describedby":"input-sbu-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-sbu-feedback",innerHTML:H.value.errors.sbu_id},null,8,["innerHTML"])]),d("div",F,[G,n(t(L),{id:"invoice_type",modelValue:H.value.invoice_type_id,"onUpdate:modelValue":l[2]||(l[2]=e=>H.value.invoice_type_id=e),options:e.references.invoice_types,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.invoice_type_id}),"aria-describedby":"input-invoice_type-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-invoice_type-feedback",innerHTML:H.value.errors.invoice_type_id},null,8,["innerHTML"])]),d("div",O,[J,n(t(L),{id:"currency",modelValue:H.value.currency_id,"onUpdate:modelValue":l[3]||(l[3]=e=>H.value.currency_id=e),options:e.references.currencies,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.currency_id}),"aria-describedby":"input-currency-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-currency-feedback",innerHTML:H.value.errors.currency_id},null,8,["innerHTML"])]),d("div",R,[Z,n(t(L),{id:"interco",modelValue:H.value.interco_id,"onUpdate:modelValue":l[4]||(l[4]=e=>H.value.interco_id=e),options:e.references.intercos,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.interco_id}),"aria-describedby":"input-interco-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-interco-feedback",innerHTML:H.value.errors.interco_id},null,8,["innerHTML"])])]),$,d("div",K,[d("div",Q,[W,n(k,{id:"invoice_number",modelValue:H.value.invoice_number,"onUpdate:modelValue":l[5]||(l[5]=e=>H.value.invoice_number=e),class:s({"is-invalid":H.value.errors.invoice_number}),"aria-describedby":"input-invoice_number-feedback",autofocus:""},null,8,["modelValue","class"]),n(f,{id:"input-invoice_number-feedback",innerHTML:H.value.errors.invoice_number},null,8,["innerHTML"])]),d("div",X,[ee,n(t(h),o({modelValue:H.value.total_amount,"onUpdate:modelValue":l[6]||(l[6]=e=>H.value.total_amount=e),modelModifiers:{number:!0}},j,{disabled:"",class:"form-control text-end","aria-describedby":"input-total_amount-feedback"}),null,16,["modelValue"]),n(f,{id:"input-total_amount-feedback",innerHTML:H.value.errors.total_amount},null,8,["innerHTML"])]),d("div",ae,[le,d("input",{value:H.value.id?H.value.code:"System Generated Number",class:"form-control text-muted",disabled:""},null,8,ie)])]),d("div",re,[d("div",de,[ne,n(t(L),{id:"vendor",modelValue:H.value.vendor_id,"onUpdate:modelValue":[l[7]||(l[7]=e=>H.value.vendor_id=e),l[8]||(l[8]=()=>H.value.vendor_site_id=null)],options:e.references.vendors,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.vendor_id}),"aria-describedby":"input-vendor-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-vendor-feedback",innerHTML:H.value.errors.vendor_id},null,8,["innerHTML"])]),d("div",se,[te,n(k,{id:"invoice_date",modelValue:H.value.invoice_date,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value.invoice_date=e),class:s({"is-invalid":H.value.errors.invoice_date}),type:"date","aria-describedby":"input-invoice_date-feedback",onInput:w},null,8,["modelValue","class"]),n(f,{id:"input-invoice_date-feedback",innerHTML:H.value.errors.invoice_date},null,8,["innerHTML"])]),d("div",oe,[ce,n(k,{id:"posting_date",modelValue:H.value.posting_date,"onUpdate:modelValue":l[10]||(l[10]=e=>H.value.posting_date=e),class:s({"is-invalid":H.value.errors.posting_date}),type:"date","aria-describedby":"input-posting_date-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-posting_date-feedback",innerHTML:H.value.errors.posting_date},null,8,["innerHTML"])])]),d("div",ue,[d("div",ve,[pe,n(t(L),{id:"vendor_site",modelValue:H.value.vendor_site_id,"onUpdate:modelValue":l[11]||(l[11]=e=>H.value.vendor_site_id=e),options:D.value,reduce:e=>e.id,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.vendor_site_id}),"aria-describedby":"input-vendor_site-feedback"},null,8,["modelValue","options","reduce","class"]),n(f,{id:"input-vendor_site-feedback",innerHTML:H.value.errors.vendor_site_id},null,8,["innerHTML"])]),d("div",me,[be,n(k,{id:"invoice_receipt_date",modelValue:H.value.invoice_receipt_date,"onUpdate:modelValue":l[12]||(l[12]=e=>H.value.invoice_receipt_date=e),class:s({"is-invalid":H.value.errors.invoice_receipt_date}),type:"date","aria-describedby":"input-invoice_receipt_date-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-invoice_receipt_date-feedback",innerHTML:H.value.errors.invoice_receipt_date},null,8,["innerHTML"])]),d("div",fe,[_e,n(k,{id:"term_date",modelValue:H.value.term_date,"onUpdate:modelValue":l[13]||(l[13]=e=>H.value.term_date=e),class:s({"is-invalid":H.value.errors.term_date}),type:"date","aria-describedby":"input-term_date-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-term_date-feedback",innerHTML:H.value.errors.term_date},null,8,["innerHTML"])])]),d("div",ge,[d("div",ye,[ke,n(k,{id:"supplier_tax_invoice",modelValue:H.value.supplier_tax_invoice,"onUpdate:modelValue":l[14]||(l[14]=e=>H.value.supplier_tax_invoice=e),class:s({"is-invalid":H.value.errors.supplier_tax_invoice}),"aria-describedby":"input-supplier_tax_invoice-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-supplier_tax_invoice-feedback",innerHTML:H.value.errors.supplier_tax_invoice},null,8,["innerHTML"])]),d("div",he,[xe,n(t(L),{id:"term",modelValue:H.value.term,"onUpdate:modelValue":[l[15]||(l[15]=e=>H.value.term=e),l[16]||(l[16]=e=>(H.value.term_id=e.id,(e=>{e&&(H.value.due_date=T(H.value.term_date).add(H.value.term.day,"day").format("YYYY-MM-DD"),H.value.term_date=T(H.value.term_date).add(H.value.term.day,"day").format("YYYY-MM-DD"))})(e)))],options:e.references.terms,clearable:!1,label:"name",class:s({"is-invalid":H.value.errors.term_id}),"aria-describedby":"input-term-feedback"},null,8,["modelValue","options","class"]),n(f,{id:"input-term-feedback",innerHTML:H.value.errors.term_id},null,8,["innerHTML"])]),d("div",Ve,[Me,n(k,{id:"supplier_tax_invoice_date",modelValue:H.value.supplier_tax_invoice_date,"onUpdate:modelValue":l[17]||(l[17]=e=>H.value.supplier_tax_invoice_date=e),class:s({"is-invalid":H.value.errors.supplier_tax_invoice_date}),type:"date","aria-describedby":"input-supplier_tax_invoice_date-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-supplier_tax_invoice_date-feedback",innerHTML:H.value.errors.supplier_tax_invoice_date},null,8,["innerHTML"])]),d("div",Te,[He,n(k,{id:"due_date",modelValue:H.value.due_date,"onUpdate:modelValue":l[18]||(l[18]=e=>H.value.due_date=e),class:s({"is-invalid":H.value.errors.due_date}),type:"date","aria-describedby":"input-due_date-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-due_date-feedback",innerHTML:H.value.errors.due_date},null,8,["innerHTML"])])]),d("div",Le,[d("div",we,[De,n(x,{id:"note",modelValue:H.value.note,"onUpdate:modelValue":l[19]||(l[19]=e=>H.value.note=e),class:s({"is-invalid":H.value.errors.note}),rows:"4","aria-describedby":"input-note-feedback"},null,8,["modelValue","class"]),n(f,{id:"input-note-feedback",innerHTML:H.value.errors.note},null,8,["innerHTML"])])]),Ue,d("div",Ye,[d("div",je,[d("div",qe,[d("h4",Ie,"Attachments ("+c(H.value.attachments.length)+")",1),d("div",Ce,[d("button",{type:"button",class:"btn btn-soft-info btn-sm shadow-none",onClick:U},[ze,u(" Upload")]),d("input",{type:"file",class:"d-none",ref_key:"attachment_file",ref:M,accept:".doc,.docx,.xls,.xlsx,.pdf,.jpeg,.jpg,.png,.zip,.rar",onChange:Y,multiple:""},null,544)])]),d("div",Pe,[null!==H.value.attachments&&H.value.attachments.length?(i(),r("div",Se,[(i(!0),r(v,null,p(H.value.attachments,((e,a)=>{return i(),r("div",{class:"border rounded border-dashed p-2",key:a},[d("div",Be,[d("div",Ne,[d("div",Ae,["application/pdf"==e.type?(i(),r("div",Ee,Fe)):m("",!0),"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e.type?(i(),r("div",Ge,Oe)):m("",!0),"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.type?(i(),r("div",Je,Re)):m("",!0),["image/jpg","image/jpeg","image/png"].includes(e.type)?(i(),r("div",Ze,$e)):m("",!0),["application/zip","application/x-zip-compressed","multipart/x-zip","application/vnd.rar","application/x-rar-compressed",""].includes(e.type)?(i(),r("div",Ke,Qe)):m("",!0)])]),d("div",We,[d("h5",Xe,[d("a",ea,c(e.name),1)]),d("div",null,c((n=e.size,(s=Math,t=s.log,o=t(n)/t(1e3)|0,n/s.pow(1e3,o)).toFixed(2)+" "+(o?"kMGTPEZY"[--o]+"B":"Bytes"))),1)]),d("div",aa,[d("div",la,[H.value.id?(i(),r("a",{key:0,class:"btn btn-icon text-muted btn-sm fs-18 shadow-none",href:(l=e,l.url?"/"+l.url+"/"+l.storage:"javascript:void(0)"),target:"_blank"},ra,8,ia)):m("",!0),d("button",{type:"button",class:"btn btn-icon text-muted btn-sm fs-18 shadow-none",onClick:b((e=>(e=>{H.value.attachments.length>=1&&H.value.attachments.splice(e,1)})(a)),["stop","prevent"])},na,8,da)])])])]);var l,n,s,t,o})),128))])):(i(),r("div",sa,[d("div",{class:"border rounded border-dashed p-2 cursor-pointer",onClick:U},ta)]))]),n(f,{id:"input-note-feedback",innerHTML:H.value.errors.attachments},null,8,["innerHTML"])])])])}}};export{oa as default};
