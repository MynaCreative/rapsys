import{T as e,Q as l,r as a,o as t,D as s,w as i,a as o,u as r,Z as n,b as d,n as c,e as u,t as p,q as m,d as b,G as v,H as h,c as f,E as w,F as g,y,h as j,M as _,a5 as k}from"./app-DSTM3SJ3.js";import{_ as x}from"./Main-B6b0oP4E.js";import{_ as C}from"./PageHeader-BsnaedmG.js";import{_ as U,a as S}from"./PerPage-BVET7Bh5.js";import{_ as F}from"./Timestamp-CtxzEmuD.js";import{_ as M}from"./Reload-Vvu4JrXY.js";import{_ as $}from"./Sort-B1j3uqbD.js";import{e as z}from"./entity-DcOze2tn.js";import{s as D}from"./service-TQgXIv5B.js";import E from"./Form-D1azPFzK.js";import H from"./Import-Cc7tmFFl.js";import I from"./Export-BovfFDW_.js";import P from"./Detail-DWv4yqqj.js";import"./logo-light-fEv4Yehr.js";import"./sweetalert2.all-BaCSOYxu.js";import"./_plugin-vue_export-helper-BCo6x5W8.js";import"./Footer-Dv8wUYbi.js";import"./Modal-1mpmqj-q.js";import"./Form-BSYeY7YH.js";import"./vue-select-BtwHA1xE.js";import"./UserName-B1eWDQBk.js";const A={class:"card"},G={class:"card-header border-0"},R={class:"row g-4"},T={class:"col-sm-auto"},V=d("i",{class:"bx bx-export label-icon align-middle fs-16"},null,-1),q={class:"col-sm"},B={class:"d-flex justify-content-sm-end"},J={class:"card-body p-0 border-2 border-top border-bottom"},N=["placeholder"],O=d("i",{class:"ri-search-line search-icon"},null,-1),Y={class:"card-body pb-0"},K={class:"table-responsive table-card mb-0"},L={class:"table table-hover table-nowrap align-middle mb-0"},Q={class:"table-light text-muted"},W=d("th",{width:"60"},"#",-1),X=d("th",{width:"120",class:"text-center"},"Action",-1),Z={class:"date"},ee={class:"date"},le={class:"list-inline gap-2 mb-0 text-center"},ae=["onClick"],te=[d("a",{href:"javascript:void(0);",class:"text-warning d-inline-block"},[d("i",{class:"ri-eye-fill fs-16"})],-1)],se=["onClick"],ie=[d("a",{href:"javascript:void(0);",class:"text-primary d-inline-block"},[d("i",{class:"ri-pencil-fill fs-16"})],-1)],oe={key:1,class:"list-inline-item",title:"Restore"},re=["onClick"],ne=[d("i",{class:"ri-refresh-fill fs-16"},null,-1)],de={class:"card-footer p-0"},ce={__name:"Index",props:["collection","filters","references"],emits:["update:loading"],setup(ce,{emit:ue}){const pe=z().page,me=[{text:"Dashboard",to:route("dashboard")},{text:"Master"},{text:pe.title,active:!0}],be=e({keyword:l().props.ziggy.query.keyword??null}),ve=a(!1),he=a(null),fe=a(!1),we=a(!1),ge=a(!1),ye=a(!1);return(e,l)=>{const a=j,z=_,ue=k;return t(),s(x,null,{header:i((()=>[o(C,{title:r(pe).title,breadcrumbs:me},null,8,["title"])])),default:i((()=>[o(r(n),{title:r(pe).title},null,8,["title"]),d("div",A,[d("div",G,[d("div",R,[d("div",T,[o(z,null,{default:i((()=>[o(a,{variant:"primary",class:"btn-label waves-effect waves-light right",onClick:l[0]||(l[0]=e=>{y.post(route(`${pe.module}.${pe.name}.synchronize`),null,{onBefore:()=>ve.value=!0,onFinish:()=>ve.value=!1})}),disabled:ve.value},{default:i((()=>[d("i",{class:c(["ri-download-cloud-2-line label-icon align-middle fs-16",{"ri-refresh-line":ve.value}])},null,2),u(" "+p(ve.value?"Synchronizing ...":"Synchronize"),1)])),_:1},8,["disabled"]),o(a,{variant:"warning",class:"btn-label waves-effect waves-light right",onClick:l[1]||(l[1]=e=>ge.value=!0)},{default:i((()=>[V,u(" Export ")])),_:1})])),_:1})]),d("div",q,[d("div",B,[o(z,null,{default:i((()=>[o(M,{page:r(pe)},null,8,["page"]),ce.collection.links.length>3?(t(),s(U,{key:0})):m("",!0)])),_:1})])])])]),d("div",J,[d("form",{onSubmit:l[3]||(l[3]=b((l=>r(be).get(e.route(`${r(pe).module}.${r(pe).name}.index`))),["prevent"])),class:"search-box"},[v(d("input",{type:"search",class:"form-control search border-0 py-3",placeholder:`Search for ${r(pe).title} ...`,"onUpdate:modelValue":l[2]||(l[2]=e=>r(be).keyword=e)},null,8,N),[[h,r(be).keyword]]),O],32)]),d("div",Y,[d("div",K,[d("table",L,[d("thead",Q,[d("tr",null,[W,o($,{label:"Code",attribute:"code"}),o($,{label:"Name",attribute:"name"}),o($,{label:"Type",attribute:"type"}),o($,{label:"SBU",attribute:"sbu_id"}),o($,{label:"Sites",attribute:"code"}),o($,{width:"140",label:"Created At",attribute:"created_at"}),o($,{width:"140",label:"Updated At",attribute:"updated_at"}),X])]),d("tbody",null,[(t(!0),f(g,null,w(ce.collection.data,((e,l)=>(t(),f("tr",{key:e.id},[d("td",null,p((ce.collection.current_page-1)*ce.collection.per_page+l+1),1),d("td",null,p(e.code),1),d("td",null,p(e.name),1),d("td",null,p(e.type),1),d("td",null,p(e.sbu?.name),1),d("td",null,[e.sites?(t(),s(ue,{key:0,variant:"light",class:"rounded-pill mx-1 cursor-pointer",onClick:()=>{he.value=e.id,ye.value=!0}},{default:i((()=>[u("("+p(e.sites.length)+") "+p(e.sites[0]?.name),1)])),_:2},1032,["onClick"])):m("",!0)]),d("td",Z,[o(F,{data:e.created_at},null,8,["data"])]),d("td",ee,[o(F,{data:e.updated_at},null,8,["data"])]),d("td",null,[d("ul",le,[e.deleted_at?(t(),f("li",oe,[d("a",{href:"javascript:void(0);",class:"text-info d-inline-block",onClick:l=>r(D).deleteData(e.id,!0)},ne,8,re)])):(t(),f(g,{key:0},[d("li",{class:"list-inline-item",title:"View",onClick:()=>{he.value=e.id,ye.value=!0}},te,8,ae),d("li",{class:"list-inline-item edit",title:"Edit",onClick:()=>{he.value=e.id,fe.value=!0}},ie,8,se)],64))])])])))),128))])])])]),d("div",de,[o(S,{data:ce.collection},null,8,["data"])])]),o(E,{show:fe.value,"onUpdate:show":l[4]||(l[4]=e=>fe.value=e),id:he.value,"onUpdate:id":l[5]||(l[5]=e=>he.value=e),references:ce.references},null,8,["show","id","references"]),o(H,{show:we.value,"onUpdate:show":l[6]||(l[6]=e=>we.value=e)},null,8,["show"]),o(I,{show:ge.value,"onUpdate:show":l[7]||(l[7]=e=>ge.value=e)},null,8,["show"]),o(P,{show:ye.value,"onUpdate:show":l[8]||(l[8]=e=>ye.value=e),id:he.value,"onUpdate:id":l[9]||(l[9]=e=>he.value=e)},null,8,["show","id"])])),_:1})}}};export{ce as default};
